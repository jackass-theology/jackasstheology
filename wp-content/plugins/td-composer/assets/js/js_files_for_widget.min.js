var tdcAdminIFrameUI;
(function(h,a,d,b){tdcAdminIFrameUI={_liveIframeWindowObject:b,_$liveIframe:b,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(b){tdcAdminIFrameUI.getIframeWindow().eval(b)},initContent:function(b){b.find(".td-main-content-wrap .tdc-row").length||
(b.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent)+"[vc_row][vc_column][/vc_column][/vc_row]"))},init:function(){window.addWrappers=function(b){b=b.find(".td-main-content-wrap");b.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(b,
a){h(a).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});b.find(".tdc-column").each(function(b,a){var c=h(a);c.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');c=c.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element")});b.find(".tdc-inner-row").each(function(b,a){h(a).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,a){var c=h(a).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-element, .tdc-element-inner-row").each(function(b,a){var c=h(a);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});b.find(".tdc-column").each(function(b,a){var c=h(a).find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))});
b.find(".tdc-elements:empty").each(function(b,a){var c="",d=h(a);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=h('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addRowWrappers=function(b){b.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');b.find(".tdc-column").each(function(b,
a){var c=h(a);c.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');c=c.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element")});b.find(".tdc-inner-row").each(function(b,a){h(a).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,a){var c=h(a).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});
b.find(".tdc-element, .tdc-element-inner-row").each(function(b,a){var c=h(a);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});b.find(".tdc-column").each(function(b,a){var c=h(a).find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))});b.find(".tdc-elements:empty").each(function(b,a){var c="",d=h(a);d.closest(".tdc-inner-column").length?
c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=h('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addColumnWrappers=function(b){b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var a=b.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element");b.find(".tdc-inner-row").each(function(b,a){h(a).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,
a){var c=h(a).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-element, .tdc-element-inner-row").each(function(b,a){var c=h(a);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});a=b.find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(a=b.find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'));b.find(".tdc-elements:empty").each(function(b,a){var c="",d=h(a);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=h('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addInnerRowWrappers=function(b){var a=b.find(".td_block_wrap");
window.checkTdBlockWrap(a);a.addClass("tdc-element");b.find(".tdc-inner-row").each(function(b,a){h(a).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,a){var c=h(a).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=h(a).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-elements:empty").each(function(b,a){var c="",d=h(a);d.closest(".tdc-inner-column").length?
c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=h('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addInnerColumnWrappers=function(b){var a=b.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element");a=b.find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(a=b.find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'));b.find(".tdc-elements:empty").each(function(a,b){var c="",d=h(b);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=h('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addLoopWrappers=function(b){b.find(".td-main-content").wrap('<div class="tdc-loop-content"></div>')};
window.addSidebarWrappers=function(b){b.find(".td-main-sidebar").wrap('<div class="tdc-sidebar-content"></div>')};window.checkTdBlockWrap=function(b){b.each(function(b,a){var c=h(a);0===parseInt(c.height())&&c.addClass("tdc-block-empty")})};var b=window.tdcPostSettings.postMetaVcJsStatus,a=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==b||""===a||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},
loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",function(){tb_remove()});var a=h(this).contents();tdcAdminIFrameUI.initContent(a);tdcAdminIFrameUI._liveIframeWindowObject=h(this).get(0).contentWindow;var d=h('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');a.find("body").prepend(d);tdcAdminWrapperUI.$recycle=d;
tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(a);tdcIFrameData.init(a,!0);tdcOperationUI.init(a,!0);a.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,"_blank")});a[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);a[0].addEventListener("mousemove",function(b){a.lastMouseEvent=b},!0);a.on("click",function(a){tdcContextMenu.hide()});a.on("scroll",function(a){tdcContextMenu.hide()});a.bind("contextmenu",function(a){if(!a.ctrlKey){a.preventDefault();
var b=a.pageX,c=a.pageY,d=0,f=h("#tdc-context-menu"),e=f.width();f=f.height();tdcMain.getSidebarInline()&&(d=tdcSidebar.$_sidebar.width());b+e+d>tdcWindowFrame.$_window.width()&&(b=tdcWindowFrame.$_window.width()-e-d);c+f>tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()&&(c=tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()-f);h(a.target).trigger(h.Event("contextmousedown",{pageX:b,pageY:c}))}})},checkIframe:function(a){if(d.isUndefined(a)){a=window.tdcPostSettings.postUrl;
var c="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&!1!==window.tdcPostSettings.tdbTemplateType?c="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId+"&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType:!1!==window.tdcPostSettings.tdbTemplateType&&(c="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);a=0>a.indexOf("?")?a+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c):a+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c);a=h('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+
a+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe);h("#tdc-live-iframe-wrapper").append(a)}else{var e=a;c=e.contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=e.get(0).contentWindow;e=h('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(e);tdcAdminWrapperUI.$recycle=e;tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(c);tdcIFrameData.init(c,
!0);tdcOperationUI.init(c,!0);c.find("a").each(function(a,b){b.setAttribute("target","_blank")});a.removeClass("tdc-live-iframe");a.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=a}}})(jQuery,Backbone,_);var tdcCssEditor={};
(function(h,a,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var c=h(b.currentTarget),d=c.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(c);h(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");
h(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");h(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){var f=h("img",b).attr("src"),e="";"undefined"===typeof f?(f=h(b).attr("src"),e=h(b).attr("class")):e=h("img",b).attr("class");h.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
dataType:"json",data:{image_class:e,action:"tdc_ajax_get_image_id"}}).done(function(b,e,g){if("success"===e)if(a.isObject(b)&&a.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{e=c.closest(".tdc-property-wrap");g=e.find(".tdc-css-image-remove");var p=e.find(".tdc-inherit-image");g.removeClass("tdc-hidden-button");"all"===tdcSidebar.currentViewportSettings.name?p.hide():p.show();c.attr("style","background-image: url( '"+f+"') ");c.data("image_link",f);c.data("image_id",b.image_id);window.send_to_editor=
window.original_send_to_editor;window.tb_remove();e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof c.data("model_id")?tdcCssEditor.saveWidgetForm(c):(b=tdcCssEditor._generateCssAttValue(d),e=tdcIFrameData.getModel(c.data("model_id")),tdcSidebarController.onUpdate(e,c.data("param_name"),"",b))}}).fail(function(a,b,c){})};return!1},tdcCssImageRemoveHandler:function(b){var c=h(b.currentTarget),d=c.closest(".tdc-property-wrap");b=d.find(".tdc-css-image-wrap");var e=d.find(".tdc-inherit-image");
c.addClass("tdc-hidden-button");"all"!==tdcSidebar.currentViewportSettings.name&&e.show();d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcSidebar.currentViewportSettings.name?b.data("image_link",""):b.data("image_link","no_value");e=b.data("model_id");a.isUndefined(e)?tdcCssEditor.saveWidgetForm(c):(c=d.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(e),
tdcSidebarController.onUpdate(e,b.data("param_name"),"",c))},_updateColorField:function(b){var c=b.closest(".tdc-property-wrap"),d=c.data("tdc-for"),e=c.find(".tdc-inherit-color"),g=c.find(".tdc-colorpicker-wrap"),p=b.data("no_value"),n=b.data("default_value");a.isUndefined(p)||1!==p?("all"!==tdcSidebar.currentViewportSettings.name&&e.show(),tdcCssEditor._updateData(b),e={isInherited:!1},d=tdcCssEditor._getSettingsProperty(d,"",e),e.isInherited?(b.attr("placeholder",d),b.val(""),c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),
g.attr("style","background-color: "+tdcCssEditor._getRgba(d))):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),a.isUndefined(n)||g.attr("style","background-color: "+tdcCssEditor._getRgba(n)),tdcCssEditor._checkDefaultColor(b))},_clearColorPicker:function(a){a=h(a.currentTarget).closest(".tdc-property-wrap");var b=a.closest(".tdc-tab-content"),d=a.find("input"),e=a.find(".tdc-inherit-color");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);
"all"!==tdcSidebar.currentViewportSettings.name&&(d.data("no_value",1),d.attr("placeholder",""),e.show());tdcCssEditor._checkDefaultColor(d);b.hasClass("tdc-tab-widget")&&(d.val(""),d.trigger("keyup"))},_showColorPicker:function(a){a=h(a.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===a.val()&&a.val("")},_changeColor:function(a){var b=h(a.currentTarget).closest(".tdc-property-wrap").find("input");""!==b.val()&&b.data("no_value",0);"keyup"===a.type?setTimeout(function(){tdcCssEditor._updateColorField(b)},
100):tdcCssEditor._updateColorField(b)},_inheritSelect:function(b){b=h(b.currentTarget);var c=b.closest(".tdc-property-wrap"),f=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][f])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][f];var e={isInherited:!1};f=tdcCssEditor._getSettingsProperty(f,d,e);var g=c.find("select:first");e.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),
b.show());a.isUndefined(f)?(g.val(g.find("option:first").val()),b.hide()):g.val(f);tdcCssEditor._updateData(g)},_inheritColor:function(b){b=h(b.currentTarget);var c=b.closest(".tdc-property-wrap"),f=c.find("input"),e=c.find(".tdc-colorpicker-wrap"),g=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][g])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][g];f.data("no_value",0);var p={isInherited:!1};g=tdcCssEditor._getSettingsProperty(g,
d,p);p.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),b.show());a.isUndefined(g)?(f.val(""),b.hide(),tdcCssEditor._updateData(f),tdcCssEditor._checkDefaultColor(f)):(f.val(""),f.attr("placeholder",g),e.attr("style","background-color: "+tdcCssEditor._getRgba(g)),tdcCssEditor._updateData(f))},_inheritImage:function(b){var c=h(b.currentTarget);b=c.closest(".tdc-property-wrap");var f=b.find(".tdc-css-image-wrap"),e=b.find(".tdc-css-image-remove");
b.find(".tdc-inherit-image").hide();e.addClass("tdc-hidden-button");f.data("image_link","");e=f.data("model_id");a.isUndefined(e)?tdcCssEditor.saveWidgetForm(c):(c=b.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,f.data("param_name"),"",c));e={isInherited:!1};c=tdcCssEditor._getSettingsProperty("background-image",d,e);e.isInherited?(b.addClass(tdcCssEditor._INHERITED_CSS_CLASS),f.attr("style","background-image: url('"+
c+"'")):f.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(a){a=h(a.currentTarget);var b=a.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,b){tdcCssEditor._currentCssSettings=d;if("undefined"===typeof b)h(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(h("."+a.get(0).className));
else{var c=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(c,a.data("param_name"),"","");h(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[a,b],"Are you sure you want to clear all the CSS settings of the selected component?")},_changeTextInput:function(b){var c=h(b.currentTarget),d=c.parent(),e=c;d.hasClass("tdc-box-margin")||d.hasClass("tdc-box-border")||d.hasClass("tdc-box-padding")||(e=c.closest(".tdc-property-wrap"));
d=c.val();var g=1;c.hasClass("tdc-css-opacity")&&(g=.01);var p=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:h.isNumeric(d)&&(p=parseFloat(d)+g);break;case 40:h.isNumeric(d)&&(p=parseFloat(d)-g)}break;case "mousewheel":b.preventDefault(),b.stopImmediatePropagation(),h.isNumeric(d)&&(p=0<b.originalEvent.deltaY?parseFloat(d)-g:parseFloat(d)+g)}a.isNaN(p)||(1>g&&(p=p.toFixed(2)),c.val(p));tdcCssEditor._updateData(c);d=e.data("tdc-for");b={isInherited:!1};d=tdcCssEditor._getSettingsProperty(d,
"",b);b.isInherited?(c.attr("placeholder",d),c.val(""),e.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(a){if(38===a.keyCode||40===a.keyCode)return!1},_focusTextInput:function(a){a=h(a.currentTarget);for(var b=a.closest(".tdc-property-wrap"),d=b[0].classList,e=0;e<d.length;e++)0===d[e].indexOf("tdc-el-")&&b.removeClass(d[e]);b.addClass("tdc-el-"+a.data("tdc-for"))},_changeDropDown:function(b){b=h(b.currentTarget);var c=b.closest(".tdc-property-wrap"),
d=c.find(".tdc-inherit-select");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var e=c.data("tdc-for"),g={isInherited:!1};tdcCssEditor._getSettingsProperty(e,"",g);g.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcSidebar.currentViewportSettings.name?d.hide():0===b[0].selectedIndex?a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all[e])?
d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var a=h("body");a.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);a.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);a.on("change keyup",".tdc-tab-design .tdc-css-bg-color",
tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);a.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._changeTextInput);a.on("keydown",".tdc-tab-design input.tdc-css-width",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);a.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);a.on("change keyup",".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);a.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-h",
tdcCssEditor._changeTextInput);a.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);a.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);a.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);a.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);a.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);a.on("change",".tdc-tab-design .tdc-css-content-h-align",
tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);a.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);a.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);a.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);a.on("click",".tdc-tab-design .tdc-inherit-color",
tdcCssEditor._inheritColor);a.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);a.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);a.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);a.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties)},setMediaInterval:function(b,c){var d=h(".tdc-media-interval");d.length||(d=h('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+
c+'"></div>'),h("body").append(d),d.find("input").on("input",function(b){var c=h(this),f=tdcAdminIFrameUI.getLiveIframe(),e=c.data("scroll-bar-width");d.find("output").html(c.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){a.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);f.css("width",parseInt(c.val())+parseInt(e))},200)}));""===b?d.hide():(d.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){a.isUndefined(tdcCssEditor.timeoutIframeHtml)||
clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!a.isUndefined(tdcSidebar.currentViewportSettings.settings)){var c=d.find("label"),f=d.find("input"),p=d.find("output");c.html(tdcSidebar.currentViewportSettings.name);a.isUndefined(tdcSidebar.currentViewportSettings.settings.limitBottom)?f.attr("min",200):f.attr("min",tdcSidebar.currentViewportSettings.settings.limitBottom);f.attr("max",tdcSidebar.currentViewportSettings.settings.limitTop);f.attr("value",b);p.html(b+"px")}},100))},_updateData:function(a){var c=
a.data("model_id"),b=a.data("param_name"),d=a.closest(".tdc-tab-content");"undefined"===typeof c?tdcCssEditor.saveWidgetForm(a):(a=tdcIFrameData.getModel(c),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(a,b,"",d))},saveWidgetForm:function(a){var c=a.closest("form");a=a.closest(".tdc-tab-content");if(c.length){var b=c.find('input[name="id_base"]').val(),d=c.find('input[name="widget-id"]').val().replace(b+"-","");b="'widget-"+b+"["+d+"][tdc_css]'";d=c.find("input[name="+b+"]");
var g=tdcCssEditor._generateCssAttValue(a);a.data("tdc_css",g);d.length?d.val(g):c.append('<input type="hidden" name='+b+' value="'+g+'">')}},addWidgetCssEditor:function(a,c){tdcCssEditor._mappedParameter=a;return tdcCssEditor._generateEditorContent(c)},addComposerCssEditor:function(a,c){tdcCssEditor._mappedParameter=a;tdcCssEditor._model=c;var b=c.get("attrs")[a.param_name];return tdcCssEditor._generateEditorContent(b)},_checkDefaultColor:function(b){var c=b.closest(".tdc-property-wrap").find(".tdc-colorpicker-wrap");
""===b.val()&&(b=b.data("default_value"),a.isUndefined(b)?c.attr("style",""):c.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},_generateEditorContent:function(b){if(a.isEmpty(b))tdcCssEditor._currentCssSettings=d;else try{var c=JSON.parse(window.atob(b));tdcDebug.log(c);a.isObject(c)?tdcCssEditor._currentCssSettings=c:tdcCssEditor._currentCssSettings=d}catch(f){tdcCssEditor._currentCssSettings=d,new tdcNotice.notice(f.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){h(".tdc-css-image-wrap").each(function(c,
b){var f=h(b),e=f.closest(".tdc-property-wrap"),n=e.find(".tdc-css-image-remove"),k=e.find(".tdc-inherit-image"),l={isInherited:!1},m=tdcCssEditor._getSettingsProperty("background-image",d,l);l.isInherited?e.addClass(tdcCssEditor._INHERITED_CSS_CLASS):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);a.isUndefined(m)?(n.addClass("tdc-hidden-button"),k.hide()):("no_value"===m?n.addClass("tdc-hidden-button"):(n.removeClass("tdc-hidden-button"),f.attr("style",'background-image: url("'+m+'")')),"all"!==
tdcSidebar.currentViewportSettings.name&&k.show());f.data("image_link",m)});h(".tdc-inherit").each(function(c,b){var f=h(b),e=f.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||e.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))f.hide();else{var n=e.data("tdc-for");e={isInherited:!1};n=tdcCssEditor._getSettingsProperty(n,d,e);e.isInherited?f.hide():a.isUndefined(n)||f.show()}})});return tdcCssEditor.generateEditorResponsiveContent()},_cleanCss:function(b,c){if("undefined"===
typeof c)return d;if("no_value"===c)return c;if("background-image"===b){var f=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(c);return a.isEmpty(f)?"":f[2]}c=c.toLowerCase();c=c.replace(/!important|px/g,"");return c.trim()},_getDataNoValue:function(a){var c="";"no_value"===a&&(c=' data-no_value="1" ');return c},callbackColorPicker:function(){h(".tdc-tab-design .tdc-property-colorpicker").each(function(){h("#tdc-palette-color-picker").tdPalette();var b=h(this),c=b.find("input"),d=b.closest(".tdc-property-wrap");
b=b.find(".tdc-colorpicker-wrap");a.isUndefined(c.val())||""===c.val()||b.attr("style","background: "+c.val());d.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?""!==c.attr("placeholder")&&b.attr("style","background-color: "+tdcCssEditor._getRgba(c.attr("placeholder"))):("no_value"===c.val()&&c.val(""),tdcCssEditor._checkDefaultColor(c))})},generateEditorResponsiveContent:function(){function b(){return n={isInherited:!1}}function c(a){return"all"!==tdcSidebar.currentViewportSettings.name?'placeholder="'+
a+'"':""}function f(){return n.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function e(c,d){var e=tdcCssEditor._getSettingsProperty(c,d,b()),k="-",l="";n.isInherited&&(k=e,e="");a.isUndefined(p)||"margin-left"!==c&&"margin-right"!==c||(l=p.get("tag"),l="vc_column"===l||"vc_column_inner"===l?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+c+'" name="" type="text" value="'+e+'" class="tdc-css-box-input tdc-css-box-input-'+c+f()+l+'" title="Css '+c+'" placeholder="'+k+
'" '+tdcSidebarPanel._getParamterDataAtts(g,p)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var g=tdcCssEditor._mappedParameter,p=tdcCssEditor._model,n={isInherited:!1};var k='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(g)+'">');k=k+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+e("margin-top","");k+=e("margin-right","");k+=e("margin-bottom","");k+=e("margin-left","");k=k+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+
e("border-top-width","");k+=e("border-right-width","");k+=e("border-bottom-width","");k+=e("border-left-width","");k=k+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+e("padding-top","");k+=e("padding-right","");k+=e("padding-bottom","");k+=e("padding-left","");k+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",d,b());k+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+f()+'" data-tdc-for="border-style">';k=k+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-border-style" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},
{value:"inherit",display:"Inherit"}],l);k+="</select></div></div>";l=a.uniqueId();var m=tdcCssEditor._getSettingsProperty("border-color","",b()),t="";n.isInherited&&(t=m,m="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+f()+'" data-tdc-for="border-color">';k=k+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(g,p)+tdcCssEditor._getDataNoValue(m)+' data-default_value="#888888" id="'+l+'" name="" type="text" '+c(t)+' value="'+m+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("border-radius","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+f()+'" data-tdc-for="border-radius">';k=k+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';l=tdcCssEditor._getSettingsProperty("width","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-width tdc-textfield-small'+f()+'" data-tdc-for="width">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size">Width</span></div><div class="tdc-property">'+
('<input class="tdc-css-width" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';l=tdcCssEditor._getSettingsProperty("shadow-size","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-size">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size">Shadow size</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-size" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";l=a.uniqueId();m=tdcCssEditor._getSettingsProperty("shadow-color","",b());t="";n.isInherited&&(t=m,m="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+f()+'" data-tdc-for="shadow-color">';k=k+'<div class="tdc-property-title"><span title="Css shadow-color">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(g,p)+tdcCssEditor._getDataNoValue(m)+' data-default_value="#888888" id="'+l+'" name="" type="text" '+c(t)+' value="'+m+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("shadow-offset-h","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-offset-h">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-h">Shadow offset H</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-offset-h" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("shadow-offset-v","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-offset-v">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-v">Shadow offset V</span></div><div class="tdc-property">'+('<input class="tdc-css-shadow-offset-v" '+
tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';l=a.uniqueId();m=tdcCssEditor._getSettingsProperty("background-color","",b());t="";n.isInherited&&(t=m,m="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+f()+'" data-tdc-for="background-color">';k=k+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(g,p)+tdcCssEditor._getDataNoValue(m)+' id="'+l+'" name="" type="text" '+c(t)+' value="'+m+'"/>');k+="</div></div>";tdcCssEditor._getSettingsProperty("background-image",d,b());k+='<div class="tdc-property-wrap tdc-property-attach_image'+f()+'">';k=k+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+
('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(g,p)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");k+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",d,b());k+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+f()+'" data-tdc-for="background-style">';k=k+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-style" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",d,b());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+f()+'" data-tdc-for="background-position">';k=k+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="opacity">';k=k+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');
k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';l=a.uniqueId();m=tdcCssEditor._getSettingsProperty("color-1-overlay","",b());t="";n.isInherited&&(t=m,m="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+f()+'" data-tdc-for="color-1-overlay">';k=k+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(g,p)+tdcCssEditor._getDataNoValue(m)+' id="'+l+'" name="" type="text" '+c(t)+' value="'+m+'"/>');k+="</div></div>";l=a.uniqueId();m=tdcCssEditor._getSettingsProperty("color-2-overlay","",b());t="";n.isInherited&&(t=m,m="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+f()+'" data-tdc-for="color-2-overlay">';k=k+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(g,p)+tdcCssEditor._getDataNoValue(m)+' id="'+l+'" name="" type="text" '+c(t)+' value="'+m+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("gradient-direction","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="gradient-direction">';k=k+'<div class="tdc-property-title"><span title="Css gradient direction">Gradient direction</span></div><div class="tdc-property">'+
('<input class="tdc-css-gradient-direction" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';l=tdcCssEditor._getSettingsProperty("content-h-align",d,b());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+f()+'" data-tdc-for="content-h-align">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-content-h-align" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("z-index","",b());m="";n.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="z-index">';
k=k+'<div class="tdc-property-title"><span title="Z-index">Z-index</span></div><div class="tdc-property">'+('<input class="tdc-css-z-index" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsPropertyFromCssSettings("display",d);k+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+f()+'" data-tdc-for="display">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align">Display</span></div><div class="tdc-property">'+
('<select class="tdc-css-display" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Show"},{value:"none",display:"Hidden"},{value:"inline",display:"Inline"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"},{value:"inline-table",display:"Inline-table"}],l);k=k+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+
('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(g,p)+' title="Clear all tab css settings">Clear CSS settings</div>');k+="</div>";tdcSidebarPanel._hook.addAction("panel_css",tdcCssEditor.callbackColorPicker);tdcSidebarPanel._hook.addAction("panel_css",function(){h(".tdc-inherit").each(function(c,b){var f=h(b),e=f.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||e.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))f.hide();else{var g=e.data("tdc-for");
e={isInherited:!1};g=tdcCssEditor._getSettingsProperty(g,d,e);e.isInherited?f.hide():a.isUndefined(g)||f.show()}})});return k},_getAvailableViewportSetting:function(a,c,d){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var b;switch(a){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]&&(b="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]?b=a:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(b="all")}if("undefined"!==
typeof b){if("undefined"!==typeof tdcCssEditor._currentCssSettings[b][c])return tdcSidebar.currentViewportSettings.name!==b&&(d.isInherited=!0,tdcDebug.log(c)),tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[b][c]);if("all"!==b)return tdcCssEditor._getAvailableViewportSetting("all",c,d)}}},_getSettingsPropertyFromCssSettings:function(a,c){var b;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d=tdcSidebar.currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[d]&&
"undefined"!==typeof tdcCssEditor._currentCssSettings[d][a])return tdcSidebar.currentViewportSettings.name!==d&&tdcDebug.log(a),tdcCssEditor._cleanCss(a,tdcCssEditor._currentCssSettings[d][a])}"undefined"===typeof b&&"undefined"!==typeof c&&(b=c);return b},_getSettingsProperty:function(a,c,d){var b;"undefined"===typeof d&&(d={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(b=tdcCssEditor._getAvailableViewportSetting(tdcSidebar.currentViewportSettings.name,a,d));"undefined"===
typeof b&&"undefined"!==typeof c&&(b=c);return b},_generateDropdownOptions:function(b,c,d){for(var f=[],g,p=!1,n=0,k=0;k<b.length;k++)a.isUndefined(d)||d!==b[k].value||(n=k),g="",a.isUndefined(c)||c!==b[k].value||(g='selected="selected"',p=!0),f.push("<option "+g+' value="'+b[k].value+'">'+b[k].display+"</option>");p||(f[n]='<option selected="selected" value="'+b[n].value+'">'+b[n].display+"</option>");return f.join("")},_generateCssAttValue:function(b){var c={},d=b.find(".tdc-css-box-input-margin-top").val().trim(),
e=b.find(".tdc-css-box-input-margin-right").val().trim(),g=b.find(".tdc-css-box-input-margin-bottom").val().trim(),p=b.find(".tdc-css-box-input-margin-left").val().trim(),n=b.find(".tdc-css-box-input-border-top-width").val().trim(),k=b.find(".tdc-css-box-input-border-right-width").val().trim(),l=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),m=b.find(".tdc-css-box-input-border-left-width").val().trim(),h=b.find(".tdc-css-box-input-padding-top").val().trim(),v=b.find(".tdc-css-box-input-padding-right").val().trim(),
u=b.find(".tdc-css-box-input-padding-bottom").val().trim(),q=b.find(".tdc-css-box-input-padding-left").val().trim(),r=b.find(".tdc-css-border-radius").val().trim(),x=b.find(".tdc-css-width").val().trim(),z=b.find(".tdc-css-shadow-size").val().trim(),w=b.find(".tdc-css-shadow-offset-h").val().trim(),A=b.find(".tdc-css-shadow-offset-v").val().trim(),y=b.find(".tdc-css-opacity").val().trim(),B=b.find(".tdc-css-gradient-direction").val().trim(),C=b.find(".tdc-css-z-index").val().trim();""!==d&&(c["margin-top"]=
d);""!==e&&(c["margin-right"]=e);""!==g&&(c["margin-bottom"]=g);""!==p&&(c["margin-left"]=p);""!==n&&(c["border-top-width"]=n);""!==k&&(c["border-right-width"]=k);""!==l&&(c["border-bottom-width"]=l);""!==m&&(c["border-left-width"]=m);""!==h&&(c["padding-top"]=h);""!==v&&(c["padding-right"]=v);""!==u&&(c["padding-bottom"]=u);""!==q&&(c["padding-left"]=q);d=b.find(".tdc-css-border-style");e=d.val().trim();""===e||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["border-style"]=
e);d=b.find(".tdc-css-border-color");e=d.val().trim();""!==e?c["border-color"]=e:(d=d.data("no_value"),a.isUndefined(d)||1!==d||(c["border-color"]="no_value"));""!==r&&(c["border-radius"]=r);""!==x&&(c.width=x);""!==z&&(c["shadow-size"]=z);r=b.find(".tdc-css-shadow-color");x=r.val().trim();""!==x?c["shadow-color"]=x:(r=r.data("no_value"),a.isUndefined(r)||1!==r||(c["shadow-color"]="no_value"));""!==w&&(c["shadow-offset-h"]=w);""!==A&&(c["shadow-offset-v"]=A);w=b.find(".tdc-css-bg-color");A=w.val().trim();
""!==A?c["background-color"]=A:(w=w.data("no_value"),a.isUndefined(w)||1!==w||(c["background-color"]="no_value"));w=b.find(".tdc-css-bg-image");w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(w=w.data("image_link"),a.isUndefined(w)||("no_value"===w?c["background-image"]="no_value":""!==w&&(c["background-image"]='url("'+w+'")')));w=b.find(".tdc-css-bg-style");A=w.val().trim();""===A||w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-style"]=
A);w=b.find(".tdc-css-bg-position");A=w.val().trim();""===A||w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-position"]=A);""!==y&&(c.opacity=y);y=b.find(".tdc-css-color-1-overlay");w=y.val().trim();""!==w?c["color-1-overlay"]=w:(y=y.data("no_value"),a.isUndefined(y)||1!==y||(c["color-1-overlay"]="no_value"));y=b.find(".tdc-css-color-2-overlay");w=y.val().trim();""!==w?c["color-2-overlay"]=w:(y=y.data("no_value"),a.isUndefined(y)||1!==y||(c["color-2-overlay"]=
"no_value"));""!==B&&(c["gradient-direction"]=B);""!==C&&(c["z-index"]=C);B=b.find(".tdc-css-content-h-align");C=B.val().trim();""===C||B.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["content-h-align"]=C);b=b.find(".tdc-css-display");c.display=b.val().trim();a.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});a.isUndefined(c["border-style"])||"solid"!==c["border-style"]||("all"===tdcSidebar.currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||
a.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete c["border-style"];a.isUndefined(c["background-style"])||"cover"!==c["background-style"]||("all"===tdcSidebar.currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete c["background-style"];a.isUndefined(c["background-position"])||"center top"!==c["background-position"]||("all"===tdcSidebar.currentViewportSettings.name||
a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&delete c["background-position"];tdcDebug.log(c);a.isEmpty(c)?(delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name]=
c,a.isUndefined(tdcSidebar.currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"]=tdcSidebar.currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]=tdcSidebar.currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return a.isEmpty(tdcCssEditor._currentCssSettings)?
"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(a){return-1!==a.indexOf("rgb")?a:(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgb("+parseInt(a[1],16)+", "+parseInt(a[2],16)+", "+parseInt(a[3],16)+")":""}}})(jQuery,_);var tdcSidebarPanel={};
(function(h){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:h,_hook:{_hooks:[],addAction:function(a,d){_.isUndefined(tdcSidebarPanel._hook._hooks[a])&&(tdcSidebarPanel._hook._hooks[a]=[]);tdcSidebarPanel._hook._hooks[a].push(d)},doAction:function(a,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[a]))for(var b=0;b<tdcSidebarPanel._hook._hooks[a].length;b++)tdcSidebarPanel._hook._hooks[a][b](d)},removeAction:function(a){_.isUndefined(tdcSidebarPanel._hook._hooks[a])||delete tdcSidebarPanel._hook._hooks[a]},
hasCallback:function(a,d){return _.isUndefined(tdcSidebarPanel._hook._hooks[a])?!1:0<=tdcSidebarPanel._hook._hooks[a].indexOf(d)}},init:function(){var a=jQuery("body");a.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{var b=jQuery(this);a=b.val();var c=tdcIFrameData.getModel(b.data("model_id"));b=b.data("param_name");tdcSidebarController.onUpdate(c,
b,this.oldValue,a);this.oldValue=a;"block_template_id"!==b&&0!==b.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});a.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive select",function(a){if("focusin"===a.type||"focus"===
a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val(),c=tdcIFrameData.getModel(a.data("model_id")),d=a.data("param_name"),e=a.attr("name"),g=a.closest(".tdc-property-responsive");b="all"===tdcSidebar.currentViewportSettings.name&&b===a.find("option:first").val()?tdcSidebarPanel.deleteResponsiveValue(e,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(e,b,tdcSidebar.currentViewportSettings.name);g.removeClass("tdc-css-inherited");g.find(".tdc-inherit-select").hide();
"all"!==tdcSidebar.currentViewportSettings.name&&(e=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),tdcSidebar.currentViewportSettings.name),g=a.closest(".tdc-property-responsive"),"undefined"===typeof e?(e=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),"undefined"!==typeof e&&(a.val(""),g.addClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show())):(a.val(e),g.removeClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show()),g.find(".tdc-inherit-select").show());
tdcSidebarController.onUpdate(c,d,this.oldValue,b)}});a.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{var b=jQuery(this).val(),c=tdcIFrameData.getModel(jQuery(this).data("model_id"));"cut"===a.type&&(b="");tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),this.oldValue,_.escape(b));this.oldValue=b}});a.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield-responsive input",
function(a){if("focusin"===a.type)this.oldValue=this.value;else{var b=jQuery(this),c=b.val(),d=tdcIFrameData.getModel(b.data("model_id"));"cut"===a.type&&(c="");if(this.oldValue!==c){var e=b.attr("name");a=b.closest(".tdc-property-responsive");e=tdcSidebarPanel.updateTextfieldResponsiveValues(e,c,tdcSidebar.currentViewportSettings.name);var g="";_.isUndefined(b.data("placeholder"))||(g=b.data("placeholder"));b.attr("placeholder",g);a.removeClass("tdc-css-inherited");""===c&&"all"!==tdcSidebar.currentViewportSettings.name&&
(c=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),"undefined"===typeof c?(c=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof c&&(b.val(""),b.attr("placeholder",c),a.addClass("tdc-css-inherited"),a.find(".tdc-inherit-select").show())):(b.val(c),a.removeClass("tdc-css-inherited"),a.find(".tdc-inherit-select").show()),a.find(".tdc-inherit-select").show());c=e;tdcSidebarController.onUpdate(d,jQuery(this).data("param_name"),
this.oldValue,_.escape(c));"all"===tdcSidebar.currentViewportSettings.name&&(this.oldValue=b.val())}}});a.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(a){var b=jQuery(this),c=this;if("range"===b.attr("type"))b.next('input[type="text"]').val(b.val());else if("text"===b.attr("type")){c=b.val().trim();var d=b.data("default_value");""!==c||_.isUndefined(d)||""===d||(c=d,b.val(c));b.prev('input[type="range"]').val(c);b=b.prev('input[type="range"]');c=b.get(0)}b=
c;"focusin"===a.type?b.oldValue=b.value:(c=jQuery(b).val(),d=tdcIFrameData.getModel(jQuery(b).data("model_id")),"cut"===a.type&&(c=""),tdcSidebarController.onUpdate(d,jQuery(b).data("param_name"),b.oldValue,_.escape(c)),b.oldValue=c)});a.on("keyup change input",".tdc-tab-no-design .tdc-property-range-responsive input",function(a){a=jQuery(this);var b=this,c=a.closest(".tdc-property-responsive");c.removeClass("tdc-css-inherited");if("range"===a.attr("type")){var d=a.val();a.next('input[type="text"]').val(d);
a.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(a.attr("name"),d,tdcSidebar.currentViewportSettings.name))}else if("text"===a.attr("type")){d=a.val().trim();b=a.prev('input[type="range"]');var e=a.data("default_value");if("all"===tdcSidebar.currentViewportSettings.name)""!==d||_.isUndefined(e)||""===e||(d=e,a.val(d));else if(""===d){var g=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all");"undefined"===typeof g?_.isUndefined(e)||""===e||(d=e,a.val(d)):(a.val(""),
a.attr("placeholder",g))}b.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(b.attr("name"),d,tdcSidebar.currentViewportSettings.name));"undefined"===typeof g?b.val(d):(b.val(g),c.addClass("tdc-css-inherited"));b=a.prev('input[type="range"]').get(0)}g=b;c=jQuery(g);a=c.data("data-to-save");c=tdcIFrameData.getModel(c.data("model_id"));g.oldValue!==a&&(tdcSidebarController.onUpdate(c,jQuery(g).data("param_name"),g.oldValue,_.escape(a)),g.oldValue=a)});a.on("keyup focus change input",
".tdc-tab-no-design .tdc-property-range_multiple input",function(a){var b=jQuery(this),c=this;if("range"===b.attr("type")){var d=b.closest(".tdc-property").find('input[type="radio"]:checked');b.closest(".tdc-property").find('input[type="text"]').val(b.val());d.data("last_value",b.val())}else if("text"===b.attr("type")){c=b.closest(".tdc-property").find('input[type="range"]');d=b.closest(".tdc-property").find('input[type="radio"]:checked');var e=d.data("default_value"),g=b.val().trim();""!==g||_.isUndefined(e)||
""===e||(g=e,b.val(g));c.val(g);d.data("last_value",g);c=c.get(0)}else if("radio"===b.attr("type")){c=b.closest(".tdc-property").find('input[type="range"]');d=b.closest(".tdc-property").find('input[type="text"]');b.closest(".tdc-property").find('input[type="radio"]:checked');g=b.data("last_value");e=b.data("default_value");var p=b.data("unit");b=c.data("min_"+p);var n=c.data("max_"+p);p=c.data("step_"+p);c.get(0).min=b;c.get(0).max=n;c.get(0).step=p;""===g?(d.val(e),c.val(e)):(d.val(g),c.val(g));
c=c.get(0)}e="";d=jQuery(c).parent().find('input[type="radio"]:checked');d.length&&(e=jQuery(d[0]).data("unit_value"));"focusin"===a.type?c.oldValue=c.value+e:(a=c.value+e,e=tdcIFrameData.getModel(jQuery(c).data("model_id")),tdcSidebarController.onUpdate(e,jQuery(c).data("param_name"),c.oldValue,_.escape(a)),c.oldValue=a)});a.on("keyup change input",".tdc-tab-no-design .tdc-property-range_multiple-responsive input",function(a){var b=jQuery(this),c=b.closest(".tdc-property-responsive"),d=c.find('input[type="range"]'),
e=c.find('input[type="radio"]:checked'),g=c.find('input[type="text"]'),p=d.get(0),n="",k=e.data("default_value"),l=tdcIFrameData.getModel(d.data("model_id")),m=d.data("param_name"),h=window.tdcAdminSettings.mappedShortcodes[l.attributes.tag],v=l="";var u=[];for(var q=0;q<h.params.length;q++)if(m===h.params[q].param_name){q=h.params[q].tdc_values;for(var r in q)q.hasOwnProperty(r)&&(u.push(q[r].unit),""===l||""===v)&&(l=q[r].value,v=q[r].unit);break}e.length&&(n=e.data("unit_value"));if("range"===
b.attr("type"))u=d.val(),g.val(u),e.data("last_value",u),g.val(u),d.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(d.attr("name"),u+n,tdcSidebar.currentViewportSettings.name)),c.removeClass("tdc-css-inherited");else if("text"===b.attr("type")){if("input"===a.type||"change"===a.type)return;c.removeClass("tdc-css-inherited");u=g.val().trim();if("all"===tdcSidebar.currentViewportSettings.name)""!==u||_.isUndefined(k)||""===k?(d.val(u),e.data("last_value",u),d.data("data-to-save",
tdcSidebarPanel.updateTextfieldResponsiveValues(d.attr("name"),u+n,tdcSidebar.currentViewportSettings.name))):(d.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+m,tdcSidebar.currentViewportSettings.name)),d.data("range_value",l),d.data("range_unit",v),d.val(l),n=c.find('input[type="radio"][data-unit_value="'+v+'"]'),h=n.data("unit"),r=d.data("min_"+h),e=d.data("max_"+h),h=d.data("step_"+h),n.prop("checked",!0),p.min=r,p.max=e,p.step=h,p.value=l,n.data("last_value",l),g.val(l));
else if(""===u)if(n=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),"undefined"===typeof n)d.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+m,tdcSidebar.currentViewportSettings.name)),d.data("range_value",l),d.data("range_unit",v),d.val(l),n=c.find('input[type="radio"][data-unit_value="'+v+'"]'),h=n.data("unit"),r=d.data("min_"+h),e=d.data("max_"+h),h=d.data("step_"+h),n.prop("checked",!0),p.min=r,p.max=e,p.step=h,p.value=l,n.data("last_value",l),g.val(l),c.addClass("tdc-css-inherited");
else for(q=0;q<h.params.length;q++){if(m===h.params[q].param_name){u=[];g=[];q=h.params[q].tdc_values;for(r in q)q.hasOwnProperty(r)&&u.push(q[r].unit);for(q=0;q<u.length&&!(g=n.split(u[q]),1<g.length);q++);g.length&&(l=g[0],v=u[q],d.data("range_value",l),d.data("range_unit",v),n=c.find('input[type="radio"][data-unit_value="'+v+'"]'),h=n.data("unit"),r=d.data("min_"+h),e=d.data("max_"+h),h=d.data("step_"+h),n.prop("checked",!0),p.min=r,p.max=e,p.step=h,p.value=l,n.data("last_value",l),c.find('input[type="text"]').val(l));
d.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+m,tdcSidebar.currentViewportSettings.name));c.addClass("tdc-css-inherited");break}}else d.val(u),e.data("last_value",u),d.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(d.attr("name"),u+n,tdcSidebar.currentViewportSettings.name))}else if("radio"===b.attr("type")){if("input"===a.type)return;m=e.data("last_value");h=e.data("unit");r=d.data("min_"+h);e=d.data("max_"+h);h=d.data("step_"+h);p.min=r;p.max=e;p.step=
h;""===m?(g.val(k),d.val(k),u=k):(g.val(m),d.val(m),u=m);d.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(d.attr("name"),u+n,tdcSidebar.currentViewportSettings.name));c.removeClass("tdc-css-inherited")}n="";c=jQuery(p).parent().find('input[type="radio"]:checked');c.length&&(n=jQuery(c[0]).data("unit_value"));"focusin"===a.type?p.oldValue=p.value+n:(c=jQuery(p),a=c.data("data-to-save"),l=tdcIFrameData.getModel(c.data("model_id")),p.oldValue!==a&&(tdcSidebarController.onUpdate(l,
jQuery(p).data("param_name"),p.oldValue,_.escape(a)),p.oldValue=a))});a.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val();a.is(":checked")||(b="");var c=tdcIFrameData.getModel(a.data("model_id"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("focus change",".tdc-tab-no-design .tdc-property-checkbox-responsive input",function(a){if("focusin"===
a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val(),c=tdcIFrameData.getModel(a.data("model_id")),d=a.data("param_name");a.is(":checked")||(b="");var e=a.attr("name"),g=a.closest(".tdc-property-responsive");b="all"===tdcSidebar.currentViewportSettings.name&&""===b?tdcSidebarPanel.deleteResponsiveValue(e,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateCheckboxResponsiveValues(e,b,tdcSidebar.currentViewportSettings.name);g.removeClass("tdc-css-inherited");g.find(".tdc-inherit-checkbox").hide();
"all"!==tdcSidebar.currentViewportSettings.name&&(e=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),tdcSidebar.currentViewportSettings.name),g=a.closest(".tdc-property-responsive"),"undefined"===typeof e?(e=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),"undefined"!==typeof e&&(g.addClass("tdc-css-inherited"),g.find(".tdc-inherit-checkbox").show())):(g.removeClass("tdc-css-inherited"),g.find(".tdc-inherit-checkbox").show()),g.find(".tdc-inherit-checkbox").show());tdcSidebarController.onUpdate(c,
d,this.oldValue,b);this.oldValue=b}});a.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);a.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);a.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);a.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);a.on("click",".tdc-tab-no-design .tdc-inherit-select",tdcSidebarPanel.tdcInheritSelectHandler);a.on("click",".tdc-tab-no-design .tdc-inherit-checkbox",
tdcSidebarPanel.tdcInheritCheckboxHandler);a.on("click",".tdc-icon-selector-content > span",function(a){a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());a.find(".selected").removeClass("selected");var b=jQuery(this),c=b.data("font_class"),d=tdcIFrameData.getModel(a.data("model_id"));b.addClass("selected");var e=a.prev(".tdc-property-wrap");e.find(".tdc-icon-wrap").html(b.html());e.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(d,
a.data("param_name"),"",c)});a.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());var b=jQuery(this).val(),c=a.find(".tdc-icon-selector-filter");a.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var a=jQuery(this),d=a.data("font_id");""===b||b===d?(a.show(),a.nextAll("span").each(function(){var a=jQuery(this),b=a.data("font_class"),d=c.val().trim();""!==d&&-1===b.indexOf(d)?
a.hide():a.show()})):(a.hide(),a.nextAll("span").hide())})});a.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(a){a=jQuery("#tdc-gradient");a.length||(a=tdcSidebar.buildGradient());var b=jQuery(this),c=b.closest(".tdc-property-wrap");b=b.next("input").val();a.toggle();c.after(a);c.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",b)});a.on("click",".tdc-colorpicker-wrap",function(a){tdcSidebarPanel.showHideTdcPalette.call(this,a)});
a.on("mousedown",function(a){var b=jQuery("#tdc-sidebar"),c=jQuery("#tdc-icon-selector"),d=jQuery("#tdc-gradient"),e=jQuery("#tdc-palette"),g=jQuery("#tdc-font-list"),p=jQuery(".tdc-preset-values-list");c.length?c.get(0).contains(a.target)||(c.hide(),b.after(c)):c=tdcSidebar.buildIconSelector();d.length?d.get(0).contains(a.target)||(d.hide(),b.after(d)):d=tdcSidebar.buildGradient();e.length?e.get(0).contains(a.target)||jQuery(a.target).hasClass("tdc-colorpicker-wrap")||(e.hide(),b.after(e),e.find("input.wp-color-picker").tdPaletteColorPicker("save_color")):
e=tdcSidebar.buildPalette();g.length&&!g.get(0).contains(a.target)&&(g.hide(),b.after(g));!p.length||p.get(0).contains(a.target)||jQuery(".tdc-preset-values").get(0).contains(a.target)?p.is(":visible")&&jQuery(".tdc-preset-values").get(0).contains(a.target)&&setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},
!0)},100):p.is(":visible")&&(p.hide(),b=jQuery(a.target),jQuery(".tdc-top-buttons").get(0).contains(a.target)||b.hasClass("tdc-top-buttons")||jQuery(".tdc-sidebar-bottom").get(0).contains(a.target)||b.hasClass("tdc-sidebar-bottom")||jQuery(".tdc-current-element-head").get(0).contains(a.target)||b.hasClass("tdc-current-element-head")?jQuery(".tdc-current-element-head").get(0).contains(a.target)||b.hasClass("tdc-current-element-head")?(tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0),jQuery(".tdc-current-element-head").trigger(a)):tdcSidebarPanel.clearPanel():setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),
$currentElement:tdcSidebar.getCurrentElement()},!0)},100))});a.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(a){a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());var b=this.value.trim();a.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=jQuery(this);-1===a.data("font_class").indexOf(b)?a.hide():a.show()})})});a.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",
function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(a){a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a});
a.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var b=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=b.val(),d=tdcSidebar.getCurrentRow().data("model_id");d=tdcIFrameData.getModel(d);var e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=tdcIFrameData.getChildCollectionWidths(e),_.isUndefined(e)||
(this.oldValue=e));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(d,this.oldValue,a),d.getShortcodeRender(1,null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(d,this.oldValue,a),d.getShortcodeRender(1,null,!0));this.oldValue=a},300)});a.on("change",
".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val(),c=tdcIFrameData.getModel(a.data("model_id"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();
var b=tdcSidebar._$currentInnerRow.data("model_id");b=tdcIFrameData.getModel(b);tdcIFrameData.changeInnerRowModel(b,this.oldValue,a);b.getShortcodeRender(tdcIFrameData.getColumnNumber(b),null,!0);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);var b=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=
setTimeout(function(){var a=b.val(),d=tdcSidebar._$currentInnerRow.data("model_id");d=tdcIFrameData.getModel(d);var e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=tdcIFrameData.getChildCollectionWidths(e),_.isUndefined(e)||(this.oldValue=e));tdcIFrameData.changeInnerRowModel(d,this.oldValue,a);d.getShortcodeRender(tdcIFrameData.getColumnNumber(d),null,!0);this.oldValue=a},300)});a.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(a){if("focusin"===
a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a}});a.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(a){a.preventDefault();var b=jQuery(this);a=jQuery("#tdc-wpeditor");var c=a.children(".content"),d=b.data("mapped_parameter_name");b=b.data("model_id");var e=tdcIFrameData.getModel(b).get("parentModel").get("attrs"),
g="tdc-three-column";if(_.has(e,"width"))switch(e.width){case "1/3":g="tdc-one-column";break;case "2/3":g="tdc-two-column"}c.addClass("tdc-dropped-wpeditor");c.html('<iframe id="tdc-iframe-wpeditor" class="'+g+'" src="'+window.tdcAdminSettings.pluginUrl+"/includes/wpeditor.php?wp_path="+window.tdcAdminSettings.ABSPATH+'" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+b+'" data-mapped_parameter_name="'+d+'"></iframe>');a.show();tdcWindowFrame.setWindowFrame(a)});a.on("click","#tdc-wpeditor .tdc-iframe-close-button",
function(a){a.preventDefault();jQuery("#tdc-wpeditor").hide()});a.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);a.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);a.on("click",".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);a.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler);a.on("click",".tdc-sidebar-shortcode-row",function(a){a=jQuery(a.currentTarget).data("model_id");a=tdcIFrameData.getModel(a);var b={error:h,
getShortcode:""};_.isUndefined(a)||tdcIFrameData._checkModelData(a,b);_.isUndefined(b.getShortcode)||console.log(b.getShortcode)});a.on("click",".tdc-sidebar-current-styles-settings",function(a){a=tdcSidebarPanel.getCurrentStyleSettings(a);if(!_.isUndefined(a)){var b="",c;for(c in a)b+='"'+c+'" => "'+a[c]+'",\n';console.log(b)}});a.on("click",".tdc-sidebar-font-reset",function(a){tdConfirm.modal({caption:"Clear Font Settings",htmlInfoContent:"This will clear all values for this font group settings.",
textYes:"Yes",objectContext:this,callbackYes:function(){tb_remove();var a=jQuery(this),c=a.data("model_id"),d=tdcIFrameData.getModel(c),e=d.get("attrs");e=_.clone(e);for(var g="font-family font-size font-line-height font-style font-weight font-transform font-spacing".split(" "),p="",n=0;n<g.length;n++){var k=a.closest(".tdc-font-manager-wrap").nextAll(".tdc-"+g[n]+":first");if(k.length){var h=k.find('[data-model_id="'+c+'"]');h.length&&(h.val(""),h.data("responsive",""),k.removeClass("tdc-css-inherited"),
p=k.find(".tdc-inherit"),p.length&&p.hide(),p=h.data("placeholder"),"undefined"!==typeof p&&h.attr("placeholder",p),p=h.data("param_name"),delete e[p],h=h.attr("name"),tdcSidebarPanel.deleteResponsiveValues(h))}}d.set("attrs",e);tdcSidebarController.onUpdate(d,p,"","")}})});a.on("click",".tdc-sidebar-font-save",function(a){a=jQuery(this);var b=a.data("model_id");b=tdcIFrameData.getModel(b).get("attrs");var c=a.data("param_name").replace("font_settings",""),d="font_family font_size font_line_height font_style font_weight font_transform".split(" "),
e={};_.each(b,function(a,b,f){if(0===b.indexOf(c))for(f=0;f<d.length;f++)if(0<b.indexOf(d[f])){e[d[f]]=a;break}});_.isEmpty(e)||tdConfirm.modal({caption:"Saving Font Settings",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},100);return'<label>Font Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),b=a.find(".info");a=a.find("input").val().trim();
if(""===a)b.html("Please enter a font name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings.fonts&&(window.tdcAdminSettings.tdcSavings.fonts=[]);-1===_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:a})?(b.html("Saving..."),window.tdcAdminSettings.tdcSavings.fonts.push({name:a,value:window.btoa(JSON.stringify(e))}),tdcUtil.updateTdcSavings(window,
function(){jQuery("#TB_ajaxContent").find(".info").html("Font has been saved!");setTimeout(function(){tb_remove()},500)})):b.html("Font name already exists! Choose another one")}}})});a.on("click",".tdc-sidebar-font-load",function(){var a=jQuery(this),b=a.closest(".tdc-property-wrap"),c=a.data("model_id"),f=a.data("param_name");if(""!==window.tdcAdminSettings.tdcSavings&&("undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts||"undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts)){var e=
jQuery("#tdc-font-list");e.length||(e=tdcSidebar.buildFontList(c,f));e.html("");"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&(jQuery('<div class="tdc-font-list-header"><span>Saved fonts</span></div>').appendTo(e),_.map(window.tdcAdminSettings.tdcSavings.fonts,function(a){jQuery('<div class="tdc-font-settings" data-value="'+a.value+'" data-model_id="'+c+'" data-param_name="'+f+'"><span class="tdc-font-name">'+a.name+'</span><span class="tdc-font-delete"></span></div>').appendTo(e)}));
if("undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts){jQuery('<div class="tdc-font-list-header"><span>Recent fonts</span></div>').appendTo(e);a=_.invert(window.tdcAdminSettings.mappedFontFamily);for(var g=window.tdcAdminSettings.tdcSavings.recentFonts.length;0<g;g--){var p=window.tdcAdminSettings.tdcSavings.recentFonts[g],h=a[p];_.isUndefined(h)||jQuery('<div class="tdc-recent-font-settings" data-value="'+p+'" data-model_id="'+c+'" data-param_name="'+f+'"><span class="tdc-font-name">'+
h+'</span><span class="tdc-recent-font-delete"></span></div>').appendTo(e)}}b.after(e);e.toggle()}});a.on("click",".tdc-font-delete",function(a){a.stopImmediatePropagation();var b=jQuery(this).closest(".tdc-font-settings");a=b.data("name");a=_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:a});window.tdcAdminSettings.tdcSavings.fonts.splice(a,1);tdcUtil.updateTdcSavings(this,function(){b.remove()})});a.on("click",".tdc-recent-font-delete",function(a){a.stopImmediatePropagation();var b=jQuery(this).closest(".tdc-recent-font-settings");
a=b.data("name");a=_.findIndex(window.tdcAdminSettings.tdcSavings.recentFonts,{name:a});window.tdcAdminSettings.tdcSavings.recentFonts.splice(a,1);tdcUtil.updateTdcSavings(this,function(){b.remove()})});a.on("click",".tdc-font-settings",function(){var a=jQuery(this),b=a.data("value");b=JSON.parse(window.atob(b));var c=a.data("model_id");c=tdcIFrameData.getModel(c);var f=c.get("attrs"),e=a.data("param_name").replace("font_settings",""),g="font_family font_size font_line_height font_style font_weight font_transform".split(" ");
_.each(b,function(a,b,c){-1!==_.indexOf(g,b)&&(f[e+b]=a)});c.set({attrs:f,rebindToPanel:!0});tdcSidebarController.onUpdate(c)});a.on("click",".tdc-recent-font-settings",function(){var a=jQuery(this),b=a.data("value"),c=a.data("model_id");c=tdcIFrameData.getModel(c);var f=c.get("attrs");a=a.data("param_name").replace("font_settings","");f[a+"font_family"]=b;c.set({attrs:f,rebindToPanel:!0});tdcSidebarController.onUpdate(c)})},getCurrentStyleSettings:function(a,d){if(_.isUndefined(d)){var b=jQuery(a.currentTarget).data("model_id");
d=tdcIFrameData.getModel(b);b={error:h};_.isUndefined(d)||tdcIFrameData._checkModelData(d,b)}var c=d.get("tag");b=d.get("attrs");b=_.clone(b);if(!_.isUndefined(b)){var f={},e={};for(g in b)0===g.indexOf("tds_")&&(f[g]=b[g]);var g=window.tdcAdminSettings.mappedShortcodes[c].params;for(c=0;c<g.length;c++){var p=!1,n=g[c];if(0===n.param_name.indexOf("tds_")){for(var k in f)if(n.param_name===k){e[k]=f[k];p=!0;break}p||(e[n.param_name]="")}}for(k in f)switch(g=k.split("-"),g.length){case 2:if(!_.has(e,
k)){f=g[0];g=!1;for(var l in e)if(f===e[l]&&1===l.split("-").length){g=!0;break}if(!g){var m;for(m in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[m],f)){var t=m;break}_.has(e,t)&&""===e[t]&&window.tdcAdminSettings.globalStyle[t]===f&&(g=!0)}g||delete b[k]}break;case 3:f=g[0];c=g[2];for(m in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[m],f)){t=m;break}g=!1;for(l in e)if(f===e[l]&&l===t+"-"+c){g=!0;break}g||_.has(e,t+
"-"+c)&&""===e[t+"-"+c]&&window.tdcAdminSettings.globalStyle[t]===f&&(g=!0);g||delete b[k]}return b}},showHideTdcPalette:function(a){a=jQuery("#tdc-palette");var d=jQuery(this).closest(".tdc-property-wrap");a.length||tdcSidebar.buildPalette();d.next("#tdc-palette").length?(a.toggle(),tdcSidebarPanel.saveTdcPalette()):(tdcSidebarPanel.saveTdcPalette(),d.after(a),a.show(),tdcSidebarPanel.openTdcPalette())},saveTdcPalette:function(){var a=jQuery("#tdc-palette"),d=a.prev(".tdc-property-wrap");a.length||
tdcSidebar.buildPalette();d.length&&(d=d.find("input").val(),a=a.find("input.wp-color-picker"),a.tdPaletteColorPicker("open_palette",d),a.tdPaletteColorPicker("save_color"))},openTdcPalette:function(){var a=jQuery("#tdc-palette"),d=a.prev(".tdc-property-wrap");a.length||tdcSidebar.buildPalette();d.length&&(d=d.find("input").val(),a.find("input.wp-color-picker").tdPaletteColorPicker("open_palette",d))},tdcIconWrapHandler:function(a){var d=jQuery(this),b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());
var c=d.closest(".tdc-property-wrap");a=b.find(".tdc-icon-selector-filter");var f=b.find(".tdc-icon-selector-lib"),e=b.find(".tdc-icon-selector-content");f.val("");a.val("");e.children().each(function(){jQuery(this).show()});b.data("model_id",d.data("model_id"));b.data("param_name",d.data("param_name"));b.show();c.after(b);d=b.data("param_name");b=tdcIFrameData.getModel(b.data("model_id")).get("attrs");var g="";_.has(b,d)&&(g=b[d].trim());a.focus();e.find("span").each(function(){var a=jQuery(this),
b=a.data("font_class");if(g===b){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");f.val(a);f.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(a){var d=jQuery(a.currentTarget);a=d.closest(".tdc-property-wrap").find(".tdc-icon-wrap");d.addClass("tdc-hidden-button");a.addClass("tdc-no-icon-selected");a.html("");d=a.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,a.data("param_name"),
"","")},tdcImageWrapHandler:function(a){var d=jQuery(a.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(a){var b=jQuery("img",a).attr("src"),f="",e="",g="";"undefined"===typeof b?
(b=jQuery(a).attr("src"),f=jQuery(a).attr("class"),e=jQuery(a).attr("height"),g=jQuery(a).attr("width")):(f=jQuery("img",a).attr("class"),e=jQuery("img",a).attr("height"),g=jQuery("img",a).attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:f,action:"tdc_ajax_get_image_id"}}).done(function(a,
c,f){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),d.attr("style","background-image: url( '"+b+"') "),d.data("image_link",b),d.data("image_id",a.image_id),d.data("image_height",e),d.data("image_width",g),d.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,window.tb_remove(),c="",f=d.data("model_id"),f=tdcIFrameData.getModel(f),d.hasClass("tdc-no-image-selected")||
(c=a.image_id.toString()),a=f.get("attrs"),a.media_size_image_height=e,a.media_size_image_width=g,f.set("attrs",a),tdcSidebarController.onUpdate(f,d.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(a){var d=jQuery(a.currentTarget);a=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");d.addClass("tdc-hidden-button");a.addClass("tdc-no-image-selected");jQuery.removeData(a,"image_link");a.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+
"/assets/images/sidebar/no_img.png'");d=a.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,a.data("param_name"),"","")},tdcInheritSelectHandler:function(a){a=jQuery(a.currentTarget);var d=a.closest(".tdc-property-wrap"),b=d.find("[data-responsive]"),c=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all");d.hasClass("tdc-property-dropdown-responsive")&&("undefined"===typeof c?(d.removeClass("tdc-css-inherited"),b.find("option:selected").removeAttr("selected").find("option:first").attr("selected",
"selected")):(b.val(c),d.addClass("tdc-css-inherited")),d=tdcSidebarPanel.deleteResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),c=tdcIFrameData.getModel(b.data("model_id")),b=b.data("param_name"),tdcSidebarController.onUpdate(c,b,"",d));a.hide()},tdcInheritCheckboxHandler:function(a){a=jQuery(a.currentTarget);var d=a.closest(".tdc-property-wrap"),b=d.find("[data-responsive]"),c=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all");d.hasClass("tdc-property-checkbox-responsive")&&
("undefined"===typeof c?(d.removeClass("tdc-css-inherited"),b.removeAttr("checked")):(""===c?b.removeAttr("checked"):b.attr("checked","checked"),d.addClass("tdc-css-inherited")),d=tdcSidebarPanel.deleteResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),c=tdcIFrameData.getModel(b.data("model_id")),b=b.data("param_name"),tdcSidebarController.onUpdate(c,b,"",d));a.hide()},bindPanelToModel:function(a,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==
a.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===d)){var b=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=a;for(var c=[],f=0;f<b.params.length;f++){var e=tdcSidebarPanel._defaultGroupName;_.isEmpty(b.params[f].group)||(e=b.params[f].group);c.push(e)}c=_.uniq(c);var g=e="",p=tdcSidebar.getCurrentTabId(),h,k;e+='<div class="tdc-sidebar-header"><div class="tdc-tabs">';var l=k=h="";for(f=
0;f<c.length;f++){g=tdcSidebarPanel._fixGroupName(c[f]);var m=tdcUtil.makeSafeForCSS(g);0===f?(h='<a href="#" data-tab-id="td-tab-'+m+'" class="tdc-tab-active" title="'+g+' settings">'+g+"</a>",k='<a href="#" data-tab-id="td-tab-'+m+'" title="'+g+' settings">'+g+"</a>"):_.isUndefined(p)||p!=="td-tab-"+m?l+='<a href="#" data-tab-id="td-tab-'+m+'" title="'+g+' settings">'+g+"</a>":(h=k,l+='<a href="#" data-tab-id="td-tab-'+m+'" class="tdc-tab-active" title="'+g+' settings">'+g+"</a>")}g=m=k=f="";switch(tdcSidebar.currentViewportSettings.name){case "all":f=
"selected";break;case "landscape":k="selected";break;case "portrait":m="selected";break;case "phone":g="selected"}e=e+(h+l)+'</div><div class="tdc-tab-responsive">';e+='<div class="tdc-responsive-buttons">';e+='<div class="tdc-responsive-all '+f+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>';"Newspaper"===window.tdcAdminSettings.themeName&&(e+='<div class="tdc-responsive-tablet-landscape '+k+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>');
e+='<div class="tdc-responsive-tablet-portrait '+m+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>';e+='<div class="tdc-responsive-phone '+g+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';e+="</div>";e+="</div></div>";e+='<div class="tdc-sidebar-sticky-a"></div>';e+='<div class="tdc-sidebar-sticky-b"></div>';e+='<div class="tdc-tab-content-wrap">';l=k=h="";for(f=0;f<c.length;f++){g=tdcSidebarPanel._fixGroupName(c[f]);m=tdcUtil.makeSafeForCSS(g);
g="tdc-tab-no-design";var t=a.get("tag");"css"===m&&(g="tdc-tab-design");0===f?(h='<div class="tdc-tab-content tdc-tab-content-visible '+g+'" id="td-tab-'+m+'">',k='<div class="tdc-tab-content '+g+'" id="td-tab-'+m+'">',m=window.tdcAdminSettings.mappedShortcodes[t].tdc_start_values,a.unset("presetValues"),_.isUndefined(m)||(m=JSON.parse(window.atob(m)),_.isArray(m)&&1<m.length&&a.set("presetValues",m)),a.has("presetValues")&&(m=a.get("presetValues"),l+=tdcSidebarPanel._addPresetValuesSelector(m,a))):
_.isUndefined(p)||p!=="td-tab-"+m?l+='<div class="tdc-tab-content '+g+'" id="td-tab-'+m+'">':(h=k,l+='<div class="tdc-tab-content tdc-tab-content-visible '+g+'" id="td-tab-'+m+'">');l+=tdcSidebarPanel._bindGroupAndGetHtml(c[f],b,a);m=' data-model_id="'+a.cid+'" ';"vc_row"===a.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+m+' title="Delete the current selected Row">Delete Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+
m+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',"dev"===window.tdcAdminSettings.deployMode&&(l+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+m+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>'),l+="</div>"):"vc_row_inner"===a.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+m+' title="Delete the current selected Inner Row">Delete Inner Row</div>',
l+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+m+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',l+="</div>"):"vc_column"!==a.attributes.tag&&"vc_column_inner"!==a.attributes.tag&&(l+='<div class="tdc-sidebar-row-buttons">',"dev"===window.tdcAdminSettings.deployMode&&(l+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+m+' title="Get the current styles\' settings">CONSOLE: style presets</div>'),
l+="</div>");l+="</div>"}e=e+(h+l)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(e);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");tdcSidebarPanel._hook.addAction("panel_rendered",function(){"undefined"===typeof window.tdcResponsiveValues&&(window.tdcResponsiveValues={},"all"===tdcSidebar.currentViewportSettings.name?jQuery(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):jQuery(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive"),jQuery(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=
jQuery(this),b=a.find("[data-responsive]"),c=b.attr("name"),d=b.data("responsive");try{var e=window.atob(d);window.tdcResponsiveValues[c]=JSON.parse(e)}catch(z){d={},a.hasClass("tdc-property-textfield-responsive")?""!==b.val()&&(d.all=b.val()):a.hasClass("tdc-property-dropdown-responsive")?b.find("option:first").val()!==b.val()&&(d.all=b.val()):a.hasClass("tdc-property-checkbox-responsive")?b.is(":checked")&&(d.all=b.val()):a.hasClass("tdc-property-range-responsive")?d.all=b.data("value"):a.hasClass("tdc-property-range_multiple-responsive")&&
(d.all=b.data("range_value")+b.data("range_unit")),window.tdcResponsiveValues[c]=d}tdcSidebarPanel.setViewportCurrentResponsiveValue(b)}))});tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-tab-content-wrap").find('select[name$="font_family"]').change(function(a){a=jQuery(this).val();""===window.tdcAdminSettings.tdcSavings&&(window.tdcAdminSettings.tdcSavings={});"undefined"===typeof window.tdcAdminSettings.tdcSavings.recentFonts&&(window.tdcAdminSettings.tdcSavings.recentFonts=
[]);var b=window.tdcAdminSettings.tdcSavings.recentFonts.indexOf(a);-1!==b&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(b,1);window.tdcAdminSettings.tdcSavings.recentFonts.push(a);20<=window.tdcAdminSettings.tdcSavings.recentFonts.length&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(0,1);tdcUtil.updateTdcSavings()})});jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===a.get("tag")){var b=
jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),d=a.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);_.isUndefined(d)&&(d="11");b.length?b.val(d):(b=jQuery("body .tdc-row-col-dropdown input[value='"+d+"']"),b.length&&b.attr("checked","checked"));b=a.get("attrs");if(_.has(b,"full_width"))var e=b.full_width;_.isUndefined(e)&&(e="");c.val(e)}}})();(function(){if("vc_row_inner"===a.get("tag")){var b=jQuery("body .tdc-innerRow-col-dropdown select"),
c=a.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var d=a.get("parentModel").get("attrs"),e="";_.has(d,"width")&&(e=d.width.replace("/",""));if(b.length)switch(b.val(c),e){case "":case "11":b.find("option[value=12_12]").addClass("tdc-block-col");b.find("option[value=23_13]").removeClass("tdc-block-col");b.find("option[value=13_23]").removeClass("tdc-block-col");b.find("option[value=13_13_13]").removeClass("tdc-block-col");break;
case "13":b.find("option[value=12_12]").addClass("tdc-block-col");b.find("option[value=23_13]").addClass("tdc-block-col");b.find("option[value=13_23]").addClass("tdc-block-col");b.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":b.find("option[value=12_12]").removeClass("tdc-block-col"),b.find("option[value=23_13]").addClass("tdc-block-col"),b.find("option[value=13_23]").addClass("tdc-block-col"),b.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(b=jQuery('body .tdc-innerRow-col-dropdown input[value="'+
c+'"]'),b.length)switch(b.attr("checked","checked"),b.next("label").show(),e){case "":case "11":b.parent().find("input[value=12_12] + label").addClass("tdc-block-col");b.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");b.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");b.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");break;case "13":b.parent().find("input[value=12_12] + label").addClass("tdc-block-col");b.parent().find("input[value=23_13] + label").addClass("tdc-block-col");
b.parent().find("input[value=13_23] + label").addClass("tdc-block-col");b.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");break;case "23":b.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),b.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),b.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),b.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})()}},_bindGroupAndGetHtml:function(a,d,b){for(var c=
"",f=b.get("attrs"),e=0;e<d.params.length;e++){var g=d.params[e].param_name,p=d.params[e].group;if(a===tdcSidebarPanel._defaultGroupName&&_.isEmpty(d.params[e].group)||d.params[e].group===a)c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[e],b);if("block_template_id"===g){p=f.block_template_id;_.isEmpty(p)&&(p=window.tdcAdminSettings.globalBlockTemplate);g=window.tdcAdminSettings.mappedBlockTemplates;for(var h=0;h<g[p].params.length;h++)if(a===tdcSidebarPanel._defaultGroupName&&_.isEmpty(g[p].params[h].group)||
g[p].params[h].group===a)c+=tdcSidebarPanel._bindParamAndGetHtml(g[p].params[h],b)}else if(0===g.indexOf("tds_")){var k=g.split("-");h=k[0];var l;2===k.length?l=k[1]:2<k.length&&new tdcNotice.notice('Param "'+g+'" must have up to at most one "-" separator ',!0,!1);g=f[g];_.isEmpty(g)&&(g=window.tdcAdminSettings.globalStyle[h]);k=window.tdcAdminSettings.settingsStyle[h];for(h=0;h<k[g].params.length;h++)if(p==a||_.isUndefined(p)&&a===tdcSidebarPanel._defaultGroupName){var m=JSON.parse(JSON.stringify(k[g].params[h]));
m.param_name=g+"-"+m.param_name;_.isUndefined(l)||(m.param_name+="-"+l);c+=tdcSidebarPanel._bindParamAndGetHtml(m,b)}}}return c},_bindParamAndGetHtml:function(a,d){switch(a.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(a,d);case "gradient":return tdcSidebarPanel.addGradient(a,d);case "dropdown":return tdcSidebarPanel.addDropDown(a,d);case "dropdown-responsive":return tdcSidebarPanel.addDropDownResponsive(a,d);case "checkbox":return tdcSidebarPanel.addCheckBox(a,d);case "checkbox-responsive":return tdcSidebarPanel.addCheckBoxResponsive(a,
d);case "range":return tdcSidebarPanel.addRange(a,d);case "range-responsive":return tdcSidebarPanel.addRangeResponsive(a,d);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(a,d);case "range_multiple-responsive":return tdcSidebarPanel.addRangeMultipleResponsive(a,d);case "icon":return tdcSidebarPanel.addIconSelector(a,d);case "attach_image":return tdcSidebarPanel.addUploadImage(a,d);case "textfield":return tdcSidebarPanel.addTextField(a,d);case "textfield-responsive":return tdcSidebarPanel.addTextFieldResponsive(a,
d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(a,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(a,d);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(a,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(a,d);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(a,d);case "font_header":return tdcSidebarPanel.addFontHeader(a,d);case "font_title":return tdcSidebarPanel.addFontTitle(a,
d);case "font_reset":return tdcSidebarPanel.addFontReset(a,d);case "font_save":return tdcSidebarPanel.addFontSave(a,d);case "font_load":return tdcSidebarPanel.addFontLoad(a,d);case "font_settings":return tdcSidebarPanel.addFontSettings(a,d);case "shadow_header":return tdcSidebarPanel.addShadowHeader(a,d);case "shadow_title":return tdcSidebarPanel.addShadowTitle(a,d);case "clearfix":return tdcSidebarPanel.addClearfix(a,d);case "tdc_hidden_field":return"";default:return a.param_name+" - "+a.type+"<br>"}},
_deletePanel:function(){tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=h;tdcSidebarPanel.saveTdcPalette();jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");
delete window.tdcResponsiveValues;tdcSidebar.hideWpeditor()},_getParameterClasses:function(a){var d="tdc-property-wrap tdc-property-"+a.type;d+=" tdc-property-"+a.param_name;_.isUndefined(a["class"])||(d+=" "+a["class"]);return d},_getParameterCurrentValue:function(a,d){var b=d.get("attrs");return _.isUndefined(b[a.param_name])?"dropdown"===a.type||_.isUndefined(a.value)?"":a.value:b[a.param_name]},_getParameterDomName:function(a){return"tdc-param-"+a.param_name},_getParamterDataAtts:function(a,d){var b=
"";if("undefined"===typeof d)return b;b+=' data-model_id="'+d.cid+'"';"undefined"!==typeof a&&(b+=' data-param_name="'+a.param_name+'"');return b},_fixGroupName:function(a){switch(a){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return a},clearPanel:function(){tdcSidebarPanel._deletePanel()},blurInputPanel:function(){jQuery("body").find("input").blur()},_addPresetValuesSelector:function(a,d){var b='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div>'+
('<ul class="tdc-preset-values-list" data-model_id="'+d.cid+'">');for(var c=1;c<a.length;c++){var f="";_.isUndefined(a[c].tdc_preset_individual)||(f='data-individual="1"');var e="";_.isUndefined(a[c].tdc_preset_class)||(e=' class="'+a[c].tdc_preset_class+'"');b+="<li "+f+" "+e+' data-values="'+window.btoa(JSON.stringify(a[c]))+'">'+a[c].tdc_preset_name+"</li>"}b+="</ul>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackPresets)||tdcSidebarPanel._hook.addAction("panel_rendered",
tdcSidebarPanel.callbackPresets);return b},callbackPresets:function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});jQuery(".tdc-preset-values-list > li").click(function(){var a=jQuery(this),d=a.data("individual"),b=a.parent(".tdc-preset-values-list");a=JSON.parse(window.atob(a.data("values")));var c=tdcIFrameData.getModel(b.data("model_id")),f={};_.isUndefined(d)||(f=_.clone(c.get("attrs")));_.isObject(a)&&(_.map(a,function(a,b){var d=!1;_.map(window.tdcAdminSettings.mappedShortcodes[c.get("tag")].params,
function(c,e){c.param_name===b&&(d=!0,f[b]=a)});if(!d){var e=f.block_template_id;_.isUndefined(e)&&(e=window.tdcAdminSettings.globalBlockTemplate);_.isUndefined(e)||_.map(window.tdcAdminSettings.mappedBlockTemplates[e].params,function(c,e){c.param_name===b&&(d=!0,f[b]=a)})}d||0!==b.indexOf("tds_")||(f[b]=a)}),c.set("attrs",f));tdcSidebarController.onUpdate(c)})},addColorpicker:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c='<div class="'+
tdcSidebarPanel._getParameterClasses(a)+'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-colorpicker-wrap" title="'+a.heading+'">');c=c+"</div>"+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');c+="</div></div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackColorPicker)||
tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackColorPicker);return c},callbackColorPicker:function(){jQuery("#tdc-palette-color-picker").tdPalette();jQuery(".tdc-tab-no-design .tdc-property-colorpicker").each(function(){var a=jQuery(this),d=a.find("input");a=a.find(".tdc-colorpicker-wrap");_.isUndefined(d.val())||""===d.val()||a.attr("style","background: "+d.val())})},addGradient:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+
'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div>'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');c+="</div></div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackGradient)||
tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackGradient);return c},callbackGradient:function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var a=jQuery(this),d=a.find("input");a=a.find(".tdc-gradient-wrap");if(!_.isUndefined(d.val())&&""!==d.val())try{var b=JSON.parse(window.atob(d.val()));_.isUndefined(b.css)||a.attr("style",b.css)}catch(c){b=d.val(),_.isUndefined(b)||a.attr("style","background: "+b)}})},addDropDown:function(a,
d){var b=!1,c=!1;_.has(a,"tdc_dropdown_images")&&""!==a.tdc_dropdown_images&&(b=!0);_.has(a,"tdc_dropdown_texts")&&""!==a.tdc_dropdown_texts&&(c=!0);var f="",e="",g=Object.keys(a.value);if(_.has(a,"tdc_min_options")&&g.length<=parseInt(a.tdc_min_options))return f;for(var h=0;h<g.length;h++){var n=!1,k="",l=g[h],m=String(tdcSidebarPanel._getParameterCurrentValue(a,d)),t=String(a.value[g[h]]);_.isObject(a.value[g[h]])&&(n=!0,t=_.values(a.value[g[h]])[0],l=_.keys(a.value[g[h]])[0]);if(b||c){0===h&&""===
m&&(m=t);m===t&&(k=" checked ");m=_.uniqueId();var v=t;if("vc_row"===d.attributes.tag||"vc_row_inner"===d.attributes.tag)v="col_"+v;e+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(a,d)+' id="'+m+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" '+k+' value="'+t+'">';b?(k="",n&&(k="tdc-standard-value"),e+='<label class="tdc-property-input-radio-label '+k+'" for="'+m+'" title="'+l+'"><div class="'+v+'"></div></label>'):e+='<label class="tdc-property-input-radio-label" for="'+
m+'" title="'+l+'">'+t+"</label>"}else m===t&&(k=' selected="selected" '),e+="<option "+k+' value="'+t+'">'+l+"</option>"}g="";_.has(a,"description")&&""!==a.description&&(g=' title="'+a.description+'" ');f+='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';f+='<div class="tdc-property-title"><span'+g+">"+a.heading+"</span></div>";f+='<div class="tdc-property">';b||c?f+=e:(f+="<select "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'">',f=f+
e+"</select>");return f+"</div></div>"},addDropDownResponsive:function(a,d){var b=!1,c=!1;_.has(a,"tdc_dropdown_images")&&""!==a.tdc_dropdown_images&&(b=!0);_.has(a,"tdc_dropdown_texts")&&""!==a.tdc_dropdown_texts&&(c=!0);var f="",e="",g=Object.keys(a.value);if(_.has(a,"tdc_min_options")&&g.length<=parseInt(a.tdc_min_options))return f;var h=' data-responsive="" ',n=String(tdcSidebarPanel._getParameterCurrentValue(a,d));try{var k=JSON.parse(window.atob(n));h=' data-responsive="'+n+'" ';"undefined"!==
typeof k[tdcSidebar.currentViewportSettings.name]&&(n=k[tdcSidebar.currentViewportSettings.name])}catch(r){}for(k=0;k<g.length;k++){var l=!1,m="",t=g[k],v=String(a.value[g[k]]);_.isObject(a.value[g[k]])&&(l=!0,v=_.values(a.value[g[k]])[0],t=_.keys(a.value[g[k]])[0]);if(b||c){0===k&&""===n&&(n=v);n===v&&(m=" checked ");var u=_.uniqueId(),q=v;if("vc_row"===d.attributes.tag||"vc_row_inner"===d.attributes.tag)q="col_"+q;e+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(a,
d)+' id="'+u+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" '+m+' value="'+v+'">';b?(m="",l&&(m="tdc-standard-value"),e+='<label class="tdc-property-input-radio-label '+m+'" for="'+u+'" title="'+t+'"><div class="'+q+'"></div></label>'):e+='<label class="tdc-property-input-radio-label" for="'+u+'" title="'+t+'">'+v+"</label>"}else n===v&&(m=' selected="selected" '),e+="<option "+m+' value="'+v+'">'+t+"</option>"}g="";_.has(a,"description")&&""!==a.description&&(g=' title="'+a.description+'" ');
f+='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(a)+'">';f+='<div class="tdc-property-title"><span'+g+">"+a.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select" style="display: block;"></div></span></div>';f+='<div class="tdc-property">';b||c?f+=e:(f+="<select "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" '+h+g+">",f=f+e+"</select>");return f+"</div></div>"},addCheckBox:function(a,d){var b=
"";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="";""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&(c=" checked ");var f='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';f+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";f=f+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="checkbox" value="yes" '+c+"/>");return f+"</div></div>"},
addCheckBoxResponsive:function(a,d){var b="",c=' data-responsive="" ',f=String(tdcSidebarPanel._getParameterCurrentValue(a,d));try{var e=JSON.parse(window.atob(f));c=' data-responsive="'+f+'" ';"undefined"!==typeof e[tdcSidebar.currentViewportSettings.name]&&(f=e[tdcSidebar.currentViewportSettings.name])}catch(g){}""!==f&&(b=" checked ");e="";_.has(a,"description")&&""!==a.description&&(e=' title="'+a.description+'" ');f='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(a)+
'">';f+='<div class="tdc-property-title"><span'+e+">"+a.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-checkbox" style="display: block;"></div></span></div>';f=f+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="checkbox" value="yes" '+b+c+"/>");return f+"</div></div>"},addRange:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');
var c="";_.has(a,"range_max")&&""!==a.range_max&&(c=a.range_max);var f="";_.has(a,"range_min")&&""!==a.range_min&&(f=a.range_min);var e="";_.has(a,"range_step")&&""!==a.range_step&&(e=a.range_step);var g="";_.has(a,"value")&&""!==a.value&&(g=a.value);var h="";""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&(h=tdcSidebarPanel._getParameterCurrentValue(a,d));var n='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';n+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";
n=n+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="range" data-value="'+h+'" data-min="'+f+'" data-max="'+c+'" data-step="'+e+'" min="'+f+'" max="'+c+'" step="'+e+'" value="'+h+'" />');return n=n+('<input type="text" class="tdc_range_value" data-default_value="'+g+'" value="'+h+'"/>')+"</div></div>"},addRangeResponsive:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+
'" ');var c="";_.has(a,"range_max")&&""!==a.range_max&&(c=a.range_max);var f="";_.has(a,"range_min")&&""!==a.range_min&&(f=a.range_min);var e="";_.has(a,"range_step")&&""!==a.range_step&&(e=a.range_step);var g="";_.has(a,"value")&&""!==a.value&&(g=a.value);""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&tdcSidebarPanel._getParameterCurrentValue(a,d);var h="";_.has(a,"placeholder")&&""!==a.placeholder&&(h=' data-placeholder="'+a.placeholder+'" placeholder="'+a.placeholder+'" ');var n=' data-responsive="" ',
k=tdcSidebarPanel._getParameterCurrentValue(a,d);try{var l=JSON.parse(window.atob(k));n=' data-responsive="'+k+'" ';k="undefined"===typeof l[tdcSidebar.currentViewportSettings.name]?"":l[tdcSidebar.currentViewportSettings.name]}catch(m){}l='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(a)+'">';l+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";l=l+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+
'" type="range" data-value="'+k+'" data-min="'+f+'" data-max="'+c+'" data-step="'+e+'" min="'+f+'" max="'+c+'" step="'+e+'" value="'+k+'" '+n+" />");return l=l+('<input type="text" class="tdc_range_value" data-default_value="'+g+'" '+h+' value="'+k+'"/>')+"</div></div>"},addRangeMultiple:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=a.tdc_values,f=tdcSidebarPanel._getParameterCurrentValue(a,d),e="",g="",h=[],n="",k="",l="",m="",t="",v="",
u="",q;for(q in c)c.hasOwnProperty(q)&&(h.push(c[q].unit),""===k||""===n)&&(m=c[q].unit,k=' data-range_unit="'+m+'" ',l=c[q].value,n=' data-range_value="'+l+'" ',t=c[q].range_min,v=c[q].range_max,u=c[q].range_step);if(""!==f){for(var r=[],x=0;x<h.length&&!(r=f.split(h[x]),1<r.length);x++);r.length&&(m=h[x],k=' data-range_unit="'+m+'" ',l=r[0],n=' data-range_value="'+l+'" ')}for(q in c)c.hasOwnProperty(q)&&(f=_.uniqueId(),e+=" data-value_"+q+'="'+c[q].value+'" ',e+=" data-min_"+q+'="'+c[q].range_min+
'" ',e+=" data-max_"+q+'="'+c[q].range_max+'" ',e+=" data-step_"+q+'="'+c[q].range_step+'" ',h=c[q].value,r="",c[q].unit===m&&(h=l,t=c[q].range_min,v=c[q].range_max,u=c[q].range_step,r="checked"),g+='<input name="'+tdcSidebarPanel._getParameterDomName(a)+'_unit" data-unit="'+q+'" data-unit_value="'+c[q].unit+'" type="radio" id="'+f+'" '+r+' data-default_value="'+c[q].value+'" data-last_value="'+h+'"/>',g+='<label for="'+f+'">'+c[q].unit+"</label>");c='<div class="'+tdcSidebarPanel._getParameterClasses(a)+
'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="range" '+n+" "+k+" "+e+' min="'+t+'" max="'+v+'" step="'+u+'" value="'+l+'"/>');c=c+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+g+"</div>"+('<input type="text" class="tdc_range_value" value="'+l+'"/>');c+="</div>";c+=
"</div>";return c+="</div>"},addRangeMultipleResponsive:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=a.tdc_values,f=tdcSidebarPanel._getParameterCurrentValue(a,d),e="",g="",h=[],n=' data-responsive="" ',k="",l="",m="",t="",v="",u="",q="",r;for(r in c)c.hasOwnProperty(r)&&(h.push(c[r].unit),""===l||""===k)&&(t=c[r].unit,l=' data-range_unit="'+t+'" ',m=c[r].value,k=' data-range_value="'+m+'" ',v=c[r].range_min,u=c[r].range_max,q=c[r].range_step);
if(""!==f){var x=f;try{var z=JSON.parse(window.atob(f));n=' data-responsive="'+f+'" ';x="undefined"===typeof z[tdcSidebar.currentViewportSettings.name]?"":z[tdcSidebar.currentViewportSettings.name]}catch(w){}if(""!==x){f=[];for(z=0;z<h.length&&!(f=x.split(h[z]),1<f.length);z++);f.length&&(t=h[z],l=' data-range_unit="'+t+'" ',m=f[0],k=' data-range_value="'+m+'" ')}}for(r in c)c.hasOwnProperty(r)&&(h=_.uniqueId(),e+=" data-value_"+r+'="'+c[r].value+'" ',e+=" data-min_"+r+'="'+c[r].range_min+'" ',e+=
" data-max_"+r+'="'+c[r].range_max+'" ',e+=" data-step_"+r+'="'+c[r].range_step+'" ',x=c[r].value,f="",c[r].unit===t&&(x=m,v=c[r].range_min,u=c[r].range_max,q=c[r].range_step,f="checked"),g+='<input name="'+tdcSidebarPanel._getParameterDomName(a)+'_unit" data-unit="'+r+'" data-unit_value="'+c[r].unit+'" type="radio" id="'+h+'" '+f+' data-default_value="'+c[r].value+'" data-last_value="'+x+'"/>',g+='<label for="'+h+'">'+c[r].unit+"</label>");c='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(a)+
'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="range" '+k+" "+l+" "+e+" "+n+' min="'+v+'" max="'+u+'" step="'+q+'" value="'+m+'"/>');c=c+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+g+"</div>"+('<input type="text" class="tdc_range_value" value="'+m+'"/>');c+="</div>";
c+="</div>";return c+="</div>"},addIconSelector:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-icon-wrap tdc-no-icon-selected" '+tdcSidebarPanel._getParamterDataAtts(a,d)+">");c+='</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div></div>';
tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(b,c){var e=jQuery(c);if(a.param_name===e.data("param_name")){var f=tdcSidebarPanel._getParameterCurrentValue(a,d);""!==f&&(e.html('<i class="'+f+'"></i>'),e.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button"))}})});return c},addUploadImage:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(a)+
'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(a,d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");c+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(b,
c){var e=jQuery(c);if(!e.parent().parent(".tdc-bg-upload").length&&a.param_name===e.data("param_name")){var f=tdcSidebarPanel._getParameterCurrentValue(a,d);""!==f&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:f,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&
_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(e.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),e.data("image_link",a.image_url),e.data("image_id",f),e.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return c},addTextField:function(a,d){var b="",c="";if(_.has(a,"description")&&""!==a.description){var f=jQuery("<div>"+a.description+"</div>");a.description===f.text()?b=' title="'+
a.description+'" ':c='<div class="tdc-description">'+a.description+"</div>"}f="";_.has(a,"placeholder")&&""!==a.placeholder&&(f=' data-placeholder="'+a.placeholder+'" placeholder="'+a.placeholder+'" ');var e='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';e+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";e=e+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" '+f+' value="'+
tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');return e=e+c+"</div></div>"},addTextFieldResponsive:function(a,d){var b="",c="";if(_.has(a,"description")&&""!==a.description){var f=jQuery("<div>"+a.description+"</div>");a.description===f.text()?b=' title="'+a.description+'" ':c='<div class="tdc-description">'+a.description+"</div>"}f="";_.has(a,"placeholder")&&""!==a.placeholder&&(f=' data-placeholder="'+a.placeholder+'" placeholder="'+a.placeholder+'" ');var e=' data-responsive="" ',g=tdcSidebarPanel._getParameterCurrentValue(a,
d);try{var h=JSON.parse(window.atob(g));e=' data-responsive="'+g+'" ';g="undefined"===typeof h[tdcSidebar.currentViewportSettings.name]?"":h[tdcSidebar.currentViewportSettings.name]}catch(n){}h='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(a)+'">';h+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";h=h+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" value="'+
g+'" '+f+e+b+"/>");return h=h+c+"</div></div>"},addTextAreaHtml:function(a,d){_.has(a,"description");return'<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+'" data-mapped_parameter_name="'+a.param_name+'">Edit Content</a>'},addTextAreaRawHtml:function(a,d){var b=_.uniqueId("tdc_textarea_"),c="";_.has(a,"description")&&""!==a.description&&(c=' title="'+a.description+'" ');var f='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';f+='<div class="tdc-property-title"><span'+c+">"+
a.heading+"</span></div>";f=f+'<div class="tdc-property">'+('<textarea id="'+b+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(a,d)+">"+tdcSidebarPanel._getParameterCurrentValue(a,d)+"</textarea>");f+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,
action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(a,d)}}).done(function(a,c,d){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+b).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,b,c){});jQuery("body").on("keyup","#"+b,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(encodeURIComponent(a.val()));tdcSidebarController.onUpdate(b,a.data("param_name"),
c,c)});return f},addSeparatorHorizontal:function(a,d){return'<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(a)+'"></div>'},addTextSeparatorHorizontal:function(a,d){return'<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(a)+'"><span>'+a.heading+"</span></div>"},addFontHeader:function(a,d){return'<div class="tdc-sidebar-font-header '+tdcSidebarPanel._getParameterClasses(a)+'"><span class="tdc-font-ico1" title="Font size"></span><span class="tdc-font-ico2" title="Line height (Use with px or a number that will be multiplied with the current font-size)"></span><span class="tdc-font-ico3" title="Font style"></span><span class="tdc-font-ico4" title="Font weight"></span><span class="tdc-font-ico5" title="Text transform"></span><span class="tdc-font-ico6" title="Letter spacing"></span></div>'},
addFontTitle:function(a,d){return'<div class="tdc-sidebar-font-title '+tdcSidebarPanel._getParameterClasses(a)+'">'+tdcSidebarPanel._getParameterCurrentValue(a,d)+"</div>"},addFontSettings:function(a,d){var b='<div class="tdc-font-manager-wrap '+tdcSidebarPanel._getParameterClasses(a)+'">';b=b+'<div class="tdc-font-manager">'+('<div title="Clear font settings" class="tdc-sidebar-font-reset" data-model_id="'+d.cid+'" data-param_name="'+a.param_name+'">Reset font settings</div>');b+='<div title="Save font settings" class="tdc-sidebar-font-save" data-model_id="'+
d.cid+'" data-param_name="'+a.param_name+'">Save font settings</div>';b+='<div title="Load font settings" class="tdc-sidebar-font-load" data-model_id="'+d.cid+'" data-param_name="'+a.param_name+'">Load font settings</div>';return b+"</div></div>"},addShadowHeader:function(a,d){return'<div class="tdc-sidebar-shadow-header '+tdcSidebarPanel._getParameterClasses(a)+'"><span class="tdc-shadow-ico1" title="Shadow size"></span><span class="tdc-shadow-ico2" title="Horizontal offset"></span><span class="tdc-shadow-ico3" title="Vertical offset"></span><span class="tdc-shadow-ico4" title="Shadow spread"></span><span class="tdc-shadow-ico5" title="Shadow color"></span></div>'},
addShadowTitle:function(a,d){return'<div class="tdc-sidebar-shadow-title '+tdcSidebarPanel._getParameterClasses(a)+'">'+tdcSidebarPanel._getParameterCurrentValue(a,d)+"</div>"},addClearfix:function(a,d){return'<div class="clearfix"></div>'},updateTextfieldResponsiveValues:function(a,d,b){"undefined"===typeof window.tdcResponsiveValues[a]?""!==d&&(window.tdcResponsiveValues[a]={},window.tdcResponsiveValues[a][b]={viewportName:d}):""===d?delete window.tdcResponsiveValues[a][b]:window.tdcResponsiveValues[a][b]=
d;d=_.allKeys(window.tdcResponsiveValues[a]);return 1===d.length&&"all"===d[0]?window.tdcResponsiveValues[a].all:1<d.length||1===d.length&&"all"!==d[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[a])):""},updateDropdownResponsiveValues:function(a,d,b){"undefined"===typeof window.tdcResponsiveValues[a]?(window.tdcResponsiveValues[a]={},window.tdcResponsiveValues[a][b]={viewportName:d}):window.tdcResponsiveValues[a][b]=d;d=_.allKeys(window.tdcResponsiveValues[a]);return 1===d.length&&"all"===
d[0]?window.tdcResponsiveValues[a].all:1<d.length||1===d.length&&"all"!==d[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[a])):""},updateCheckboxResponsiveValues:function(a,d,b){"undefined"===typeof window.tdcResponsiveValues[a]?(window.tdcResponsiveValues[a]={},window.tdcResponsiveValues[a][b]={viewportName:d}):window.tdcResponsiveValues[a][b]=d;d=_.allKeys(window.tdcResponsiveValues[a]);return 1===d.length&&"all"===d[0]?window.tdcResponsiveValues[a].all:1<d.length||1===d.length&&"all"!==
d[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[a])):""},deleteResponsiveValue:function(a,d){"undefined"!==typeof window.tdcResponsiveValues[a]&&delete window.tdcResponsiveValues[a][d];var b=_.allKeys(window.tdcResponsiveValues[a]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[a].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[a])):""},deleteResponsiveValues:function(a){"undefined"!==typeof window.tdcResponsiveValues[a]&&(window.tdcResponsiveValues[a]=
{})},getCurrentResponsiveValue:function(a,d){if("undefined"!==typeof window.tdcResponsiveValues[a])return window.tdcResponsiveValues[a][d]},setViewportCurrentResponsiveValue:function(a){var d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),tdcSidebar.currentViewportSettings.name),b=a.closest(".tdc-property-responsive");if(b.hasClass("tdc-property-textfield-responsive")){var c="";_.isUndefined(a.data("placeholder"))||(c=a.data("placeholder"));a.attr("placeholder",c);_.isUndefined(d)?(d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),
"all"),_.isUndefined(d)?a.val(""):(a.val(d),a.attr("placeholder",d),b.addClass("tdc-css-inherited"))):(a.val(d),b.removeClass("tdc-css-inherited"))}else if(b.hasClass("tdc-property-checkbox-responsive"))c=b.find(".tdc-inherit-checkbox"),_.isUndefined(d)?(d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),_.isUndefined(d)?a.removeAttr("checked"):(""===d?a.removeAttr("checked"):a.attr("checked","checked"),b.addClass("tdc-css-inherited")),c.hide()):(""===d?a.removeAttr("checked"):a.attr("checked",
"checked"),b.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?c.hide():c.show());else if(b.hasClass("tdc-property-dropdown-responsive"))c=b.find(".tdc-inherit-select"),_.isUndefined(d)?(d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),_.isUndefined(d)?a.find("option:selected").removeAttr("selected").find("option:first").attr("selected","selected"):(a.val(d),b.addClass("tdc-css-inherited")),c.hide()):(a.val(d),b.removeClass("tdc-css-inherited"),"all"===
tdcSidebar.currentViewportSettings.name?c.hide():c.show());else if(b.hasClass("tdc-property-range-responsive")){c="";_.isUndefined(a.data("placeholder"))||(c=a.data("placeholder"));var f=a.next('input[type="text"]');f.attr("placeholder",c);_.isUndefined(d)?(d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),_.isUndefined(d)?(a.val(""),f.val("")):(a.val(d),f.val(d),f.attr("placeholder",d),b.addClass("tdc-css-inherited"))):(a.val(d),f.val(d),b.removeClass("tdc-css-inherited"))}else if(b.hasClass("tdc-property-range_multiple-responsive")){c=
tdcIFrameData.getModel(a.data("model_id"));var e=a.data("param_name"),g=window.tdcAdminSettings.mappedShortcodes[c.attributes.tag];c=[];for(var h=f="",n=0;n<g.params.length;n++)if(e===g.params[n].param_name){e=g.params[n].tdc_values;for(var k in e)e.hasOwnProperty(k)&&(c.push(e[k].unit),""===f||""===h)&&(f=e[k].value,h=e[k].unit);break}_.isUndefined(d)?(d=tdcSidebarPanel.getCurrentResponsiveValue(a.attr("name"),"all"),_.isUndefined(d)&&(a.data("range_value",f),a.data("range_unit",h),a.val(f),k=b.find('input[type="radio"][data-unit_value="'+
h+'"]'),n=k.data("unit"),e=a.data("min_"+n),h=a.data("max_"+n),n=a.data("step_"+n),g=a.get(0),k.prop("checked",!0),g.min=e,g.max=h,g.step=n,g.value=f,k.data("last_value",f),b.find('input[type="text"]').val(f)),"all"===tdcSidebar.currentViewportSettings.name?b.removeClass("tdc-css-inherited"):b.addClass("tdc-css-inherited")):b.removeClass("tdc-css-inherited");if(!_.isUndefined(d)){f=[];for(n=0;n<c.length&&!(f=d.split(c[n]),1<f.length);n++);f.length&&(f=f[0],h=c[n],a.data("range_value",f),a.data("range_unit",
h),a.val(f),k=b.find('input[type="radio"][data-unit_value="'+h+'"]'),n=k.data("unit"),e=a.data("min_"+n),h=a.data("max_"+n),n=a.data("step_"+n),g=a.get(0),k.prop("checked",!0),g.min=e,g.max=h,g.step=n,g.value=f,k.data("last_value",f),b.find('input[type="text"]').val(f))}}}}})();var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(h,a){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+h+"&"+a:window.tdcAdminSettings.wpRestUrl+h+"?"+a},makeSafeForCSS:function(h){return h.replace(/[^a-z0-9]/g,function(a){var d=a.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?a.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})},updateTdcSavings:function(h,a){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(d,b,c){"success"===b&&(_.isObject(d)&&_.has(d,"errors")?new tdcNotice.notice(d.errors,!0,!1):("undefined"!==typeof a&&a.call(h),tdcSidebar.updateSavedShortcodes()))}).fail(function(a,b,c){})},b64EncodeUnicode:function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,
function(a,d){return String.fromCharCode("0x"+d)}))},b64DecodeUnicode:function(h){return decodeURIComponent(atob(h).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(h,a){var d=tdcUtil._getStorage();d=null===d?{}:JSON.parse(tdcUtil.b64DecodeUnicode(d));d[h]=a;tdcUtil._setStorage(tdcUtil.b64EncodeUnicode(JSON.stringify(d)))},getStorageItem:function(h){var a=tdcUtil._getStorage();if(null!==a)try{if(a=JSON.parse(tdcUtil.b64DecodeUnicode(a)),
a.hasOwnProperty(h))return a[h]}catch(d){}},clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(h){window.localStorage.setItem(window.tdcAdminSettings.themeName,h)}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(h){this.shortcode=h.shortcode;this.columns=h.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(h){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var a=new tdcJobManager.jobRequest(h),
d="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&!1!==window.tdcPostSettings.tdbTemplateType?d="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId+"&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType:!1!==window.tdcPostSettings.tdbTemplateType&&(d="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+a.jobId+"&tmp_blockUid="+a.blockUid+"&post_id="+window.tdcPostSettings.postId+
d+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);_.isUndefined(h.is_snapshot)&&tdcRecycle.takeSnapshot()},cache:!1,data:a,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(b,c,d){null===b?h.error_callback(a,"tdcJobManager.addJob - ERROR: Empty response received from server"):
(!0===tdcJobManager._isJobCallbackReplyValid(h.blockUid,b.jobId)?h.success_callback(b):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(b,c,d){h.error_callback(a,"tdcJobManager.addJob - Error callback - textStatus: "+c+" errorThrown: "+d);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(h,a){return"undefined"===typeof tdcJobManager._sentJobs[h]||parseInt(tdcJobManager._sentJobs[h])<parseInt(a)?(tdcJobManager._sentJobs[h]=
a,!0):!1},_generateJobId:function(){var h=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return h},_getUniqueID:function(){function h(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return h()+h()+"-"+h()+"-"+h()+"-"+h()+"-"+h()+h()+h()}}})();
