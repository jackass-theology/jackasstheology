(function(){jQuery(document).ready(function(){jQuery("#wp-admin-bar-tdb_template_builder_disabled a").click(function(a){a.preventDefault();alert("Please select tagDiv Builder Template from the theme panel or set a default template. The current page/post uses a template that is not editable.")});jQuery("#wp-admin-bar-new-tdb_templates").hide()})})();var tdbMenu={};
(function(){tdbMenu={items:[],item:function(){this.blockUid="";this._outsideClickArea=this._mainMenu=this._itemsWithSubmenu=null;this._outsideClickExcludedAreas="";this._openMenuClass="tdb-hover";this._openMenuBodyClass="tdb-open-menu";this._is_initialized=!1},init:function(){tdbMenu.items=[]},_initialize_item:function(a){!0!==a._is_initialized&&(tdbMenu._setHover(a),a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdbMenu.items.push(a);
tdbMenu._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdbMenu.items.length;b++)if(tdbMenu.items[b].blockUid===a)return tdbMenu.items.splice(b,1),!0;return!1},megaMenuFull:function(a){var b=a.jqueryObj,c,d,f=b.find(".tdb-menu .tdb-mega-menu ul");jQuery(window).resize(function(){setTimeout(function(){c=b.offset();d=-c.left+"px";b.hasClass("tdb-mm-align-screen")&&0<f.length&&f.attr("style","left:"+d+"; width: "+jQuery("body").outerWidth()+"px !important")},60)});jQuery(window).resize()},
_getSubmenuPosition:function(a){var b=jQuery(window).width();a=a.children("ul").first();if(0<a.length){var c=a.offset().left+a.width();c>b&&(a.parent().parent().hasClass("tdb-menu")?a.css("left","-"+(c-b)+"px"):a.addClass("reversed").css("left","-"+(a.width()+0)+"px"))}},_getMouseAngleDirection:function(a,b,c,d){return Math.atan2(c-a,d-b)/Math.PI*180},_setHover:function(a){var b=a.jqueryObj.find(".tdb-menu");b.supersubs({minWidth:10,maxWidth:20,extraWidth:1});var c=b.find(".menu-item-has-children > a, .tdb-mega-menu > a");
c.parent().find("ul").first().css("display","none");if(tdDetect.isTouchDevice)jQuery(document).on("touchstart","body",function(b){var e=c.parent(),d=jQuery("body");d.hasClass(a._openMenuBodyClass)&&!e.is(b.target)&&0===e.has(b.target).length&&(e.removeClass(a._openMenuClass),e.children("ul").hide(),d.removeClass(a._openMenuBodyClass))}),c.on("touchstart",function(b){b.preventDefault();b.stopPropagation();var e=jQuery(this);b=e.parent();var d=jQuery("body");b.hasClass(a._openMenuClass)?null!==e.attr("href")&&
"#"!==e.attr("href")?window.location.href=e.attr("href"):((b.parent().hasClass("tdb-menu")||b.parent().hasClass("top-header-menu"))&&d.removeClass(a._openMenuBodyClass),b.removeClass(a._openMenuClass),b.find("ul").hide(),b.find("li").removeClass(a._openMenuClass)):(b.parent().hasClass("tdb-menu")||b.parent().hasClass("top-header-menu")?(c.parent().removeClass(a._openMenuClass),c.parent().children("ul").hide()):(e=b.siblings(),e.removeClass(a._openMenuClass),e.find("ul").hide(),e.find("li").removeClass(a._openMenuClass)),
b.addClass(a._openMenuClass),b.children("ul").show(),tdbMenu._getSubmenuPosition(b),d.addClass(a._openMenuBodyClass))});else{var d={},f,m=!0;b.on("mouseleave",function(){c.parent().removeClass(a._openMenuClass);c.parent().children("ul").hide();d={}});b.find(".menu-item").hover(function(){var b=jQuery(this),k="",l,g;if(b.hasClass("menu-item-has-children")||b.hasClass("tdb-mega-menu"))if(b.parent().hasClass("tdb-menu"))if(jQuery.isEmptyObject(d))b.addClass(a._openMenuClass),b.children("ul").show(),
d=b;else{if(b[0]!==d[0]){var h=g=l=0;var n=null;!0===m&&(m=!1,f=setTimeout(function(){c.parent().removeClass(a._openMenuClass);c.parent().children("ul").hide();b.addClass(a._openMenuClass);b.children("ul").show();d=b},400));b.on("mousemove",function(e){5<=l?(l=0,n=tdbMenu._getMouseAngleDirection(g,h,e.pageX,e.pageY),g=e.pageX,h=e.pageY):(l++,0===g&&0===h&&(g=e.pageX,h=e.pageY));null!==n&&(85<n||-85>n)&&(c.parent().removeClass(a._openMenuClass),c.parent().children("ul").hide(),b.addClass(a._openMenuClass),
b.children("ul").show(),b.off("mousemove"),clearTimeout(f),m=!0,d=b)})}}else k=b.siblings(),k.removeClass(a._openMenuClass),k.find("ul").hide(),k.find("li").removeClass(a._openMenuClass),b.addClass(a._openMenuClass),b.children("ul").show(),tdbMenu._getSubmenuPosition(b);else b.parent().hasClass("tdb-menu")?jQuery.isEmptyObject(d)||(h=g=l=0,n=null,!0===m&&(m=!1,f=setTimeout(function(){c.parent().removeClass(a._openMenuClass);c.parent().children("ul").hide();d={}},400)),b.on("mousemove",function(e){5<=
l?(l=0,n=tdbMenu._getMouseAngleDirection(g,h,e.pageX,e.pageY),g=e.pageX,h=e.pageY):(l++,0===g&&0===h&&(g=e.pageX,h=e.pageY));null!==n&&(85<n||-85>n)&&(c.parent().removeClass(a._openMenuClass),c.parent().children("ul").hide(),b.off("mousemove"),clearTimeout(f),m=!0,d={})})):(d=b.parent(),k=b.siblings(),k.removeClass(a._openMenuClass),k.find("ul").hide(),k.find("li").removeClass(a._openMenuClass))},function(){var a=jQuery(this);!1===m&&(clearTimeout(f),m=!0);a.off("mousemove")})}},unsetHover:function(a){null!==
a._itemsWithSubmenu&&a._itemsWithSubmenu.off();null!==a._outsideClickArea&&a._outsideClickArea.off()}}})();var tdbMenuItemPullDown={};
(function(){tdbMenuItemPullDown={init:function(){setTimeout(function(){jQuery(".tdb-menu-items-pulldown").each(function(a,b){var c=jQuery(b),d=c.parent().attr("id"),f=jQuery("."+d+"_rand"),m="";"none"!==f.css("max-width")&&(m=f.css("max-width"));if(f.hasClass("tdb-menu-items-in-more")){var e=c.find(".tdb-menu:first"),k=e.parents(".tdb-menu-items-pulldown:first"),l=[],g=new tdPullDown.item;if(void 0!==f.css("display")&&"inline-block"===f.css("display")){var h=f.closest(".vc_column_container");k=h;
f="";f=0!==h.find(".tdc-elements").length?".tdc-elements":".wpb_wrapper";h.find(f+" > .td_block_wrap").each(function(){var a=.9*h.outerWidth(!0),b=jQuery(this).outerWidth(!0);if(jQuery(this).data("td-block-uid")!==d)if(b<a)l.push(jQuery(this));else return!1})}g.blockUid=d;g.horizontal_jquery_obj=e;g.vertical_jquery_obj=c.find(".tdb-menu-items-dropdown:first");g.horizontal_element_css_class="tdb-menu-item-button";g.horizontal_no_items_css_class="tdb-menu-items-empty";g.container_jquery_obj=k;g.horizontal_no_items_css_class=
"tdb-menu-noitems";g.horizontal_max_width=m;g.excluded_jquery_elements=l;tdPullDown.add_item(g)}})},50)}}})();jQuery().ready(function(){tdbMenu.init()});jQuery(window).load(function(){tdbMenuItemPullDown.init()});var tdbSearch={};
(function(){tdbSearch={items:[],init:function(){tdbSearch.items=[]},item:function(){this.jqueryObj=this.blockAtts=this.blockUid=void 0;this._is_search_open=!1;this._last_request_results_count=this._current_selection_index=0;this._first_down_up=!0;this._openSearchFormClass="";this._is_initialized=!1},_initialize_item:function(a){!0!==a._is_initialized&&(jQuery(document).on("click",function(b){var c=jQuery("."+a.blockUid+"_rand #tdb-head-search-input").get(0),d="";""!==b.target.id&&(d=jQuery("."+a.blockUid+
"_rand #"+b.target.id).get(0));c!==d&&!0===a._is_search_open&&tdbSearch.hide_search_box(a)}),a.jqueryObj.find("#tdb-search-button").on("click",function(b){b.preventDefault();b.stopPropagation();!0===a._is_search_open?tdbSearch.hide_search_box(a):tdbSearch.show_search_box(a)}),a.jqueryObj.find("#tdb-head-search-input").keydown(function(b){if(b.which&&39===b.which||b.keyCode&&39===b.keyCode||b.which&&37===b.which||b.keyCode&&37===b.keyCode)tdbSearch.set_input_focus(a);else{if(b.which&&13===b.which||
b.keyCode&&13===b.keyCode)return b=a.jqueryObj.find(".td-aj-cur-element"),0<b.length?window.location=b.find(".entry-title a").attr("href"):jQuery(this).parent().parent().submit(),!1;if(b.which&&40===b.which||b.keyCode&&40===b.keyCode)return tdbSearch.move_prompt_down(a),!1;if(b.which&&38===b.which||b.keyCode&&38===b.keyCode)return tdbSearch.move_prompt_up(a),!1;(b.which&&8===b.which||b.keyCode&&8===b.keyCode)&&1===jQuery(this).val().length&&a.jqueryObj.find("#tdb-aj-search").empty();tdbSearch.set_input_focus(a);
setTimeout(function(){tdbSearch.do_ajax_call(a)},100);return!0}}),a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdbSearch.items.push(a);tdbSearch._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdbSearch.items.length;b++)if(tdbSearch.items[b].blockUid===a)return tdbSearch.items.splice(b,1),!0;return!1},show_search_box:function(a){a.jqueryObj.find(".tdb-drop-down-search").addClass(a._openSearchFormClass);!0!==tdDetect.isIos&&
setTimeout(function(){document.querySelector("."+a.blockUid+"_rand #tdb-head-search-input").focus()},200);a._is_search_open=!0},hide_search_box:function(a){a.jqueryObj.find(".tdb-drop-down-search").removeClass(a._openSearchFormClass);a._is_search_open=!1},move_prompt_up:function(a){!0===a._first_down_up?(a._first_down_up=!1,0===a._current_selection_index?a._current_selection_index=a._last_request_results_count-1:a._current_selection_index--):0===a._current_selection_index?a._current_selection_index=
a._last_request_results_count:a._current_selection_index--;tdbSearch._repaintCurrentElement(a)},move_prompt_down:function(a){!0===a._first_down_up?a._first_down_up=!1:a._current_selection_index===a._last_request_results_count?a._current_selection_index=0:a._current_selection_index++;tdbSearch._repaintCurrentElement(a)},set_input_focus:function(a){a._current_selection_index=0;a._first_down_up=!0;a.jqueryObj.find(".tdb-search-form").fadeTo(100,1);a.jqueryObj.find(".td_module_wrap").removeClass("td-aj-cur-element")},
remove_input_focus:function(a){0!==a._last_request_results_count&&a.jqueryObj.find(".tdb-search-form").css("opacity",.5)},_repaintCurrentElement:function(a){a.jqueryObj.find(".td_module_wrap").removeClass("td-aj-cur-element");a._current_selection_index>a._last_request_results_count-1?a.jqueryObj.find(".tdb-search-form").fadeTo(100,1):(tdbSearch.remove_input_focus(a),a.jqueryObj.find(".td_module_wrap").eq(a._current_selection_index).addClass("td-aj-cur-element"))},do_ajax_call:function(a){var b=a.jqueryObj.find("#tdb-head-search-input").val();
""===b?tdbSearch.set_input_focus(a):tdLocalCache.exist("tdb-"+b)?tdbSearch.process_ajax_response(tdLocalCache.get("tdb-"+b),a):jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_ajax_search",module:"tdb_module_search",atts:a.blockAtts,td_string:b},success:function(c,d,f){tdLocalCache.set("tdb-"+b,c);tdbSearch.process_ajax_response(c,a)},error:function(a,b,f){console.log(f)}})},process_ajax_response:function(a,b){var c=b.jqueryObj.find("#tdb-head-search-input").val(),d=b.jqueryObj.find("#tdb-aj-search");
if(""===c)d.empty();else{var f=jQuery.parseJSON(a);f.td_search_query===c&&(b._current_selection_index=0,b._last_request_results_count=f.td_total_in_list,b._first_down_up=!0,d.html(f.td_data),"undefined"!==typeof window.tdAnimationStack&&!0===window.tdAnimationStack.activated&&(window.tdAnimationStack.check_for_new_items("#tdb-aj-search .td-animation-stack",window.tdAnimationStack.SORTED_METHOD.sort_left_to_right,!0,!1),window.tdAnimationStack.compute_items(!1)))}}}})();jQuery().ready(function(){tdbSearch.init()});
